<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>merge &#8212; sofia_redux v1.3.4.dev0</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sofia.css?v=3fe2c07e" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=eafc0fe6" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    
    <script src="../_static/jquery.js?v=5d32c60e"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js?v=602f4d50"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=4825356b"></script>
    <script type="text/javascript" src="../_static/sidebar.js"></script>
    <script type="text/javascript" src="../_static/copybutton.js"></script>
    <link rel="icon" href="../_static/redux.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="merge_centroid" href="sofia_redux.instruments.forcast.merge_centroid.merge_centroid.html" />
    <link rel="prev" title="jbclean" href="sofia_redux.instruments.forcast.jbclean.jbclean.html" />
    <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,600' rel='stylesheet' type='text/css'/>

  </head><body>
<div class="topbar">
  <a class="brand" title="Documentation Home" href="../index.html"><span id="logotext1">SOFIA</span><span id="logotext2">Redux</span><span id="logotext3">:docs</span></a>
  <ul>
    <li><a class="homelink" title="SOFIA Homepage" href="https://www.sofia.usra.edu/"></a></li>
    <li><a title="General Index" href="../genindex.html">Index</a></li>
    <li><a title="Module Index" href="../py-modindex.html">Modules</a></li>
    <li>
      
      
<form action="../search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
      
    </li>
  </ul>
</div>

<div class="related">
    <h3>Navigation</h3>
    <ul>
      <li class="right">
	<a href="sofia_redux.instruments.forcast.merge_centroid.merge_centroid.html" title="merge_centroid">
	  next &raquo;
	</a>
      </li>
      <li class="right">
	<a href="sofia_redux.instruments.forcast.jbclean.jbclean.html" title="jbclean">
	  &laquo; previous
	</a>
	 |
      </li>
      <li>
	<a href="../index.html">sofia_redux v1.3.4.dev0</a>
	 &#187;
      </li>
      <li><a href="../sofia_redux/index.html" >SOFIA Redux</a> &#187;</li>
      <li><a href="../manuals/forcast/developers/developers.html" accesskey="U">FORCAST Redux Developer’s Manual</a> &#187;</li>
      
      <li>merge</li> 
    </ul>
</div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="merge">
<h1>merge<a class="headerlink" href="#merge" title="Permalink to this heading">¶</a></h1>
<dl class="py function">
<dt class="sig sig-object py" id="sofia_redux.instruments.forcast.merge.merge">
<span class="sig-prename descclassname"><span class="pre">sofia_redux.instruments.forcast.merge.</span></span><span class="sig-name descname"><span class="pre">merge</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">header</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">variance</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normmap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skip_rotation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">strip_border</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rotation_order</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sofia_redux/instruments/forcast/merge.html#merge"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sofia_redux.instruments.forcast.merge.merge" title="Permalink to this definition">¶</a></dt>
<dd><p>Merge positive and negative instances of the source in the images</p>
<p>After chop/nod subtraction, there are typically positive and
negative instances of the sources in the same frame, although
the number of images depends on the chop/nod mode.  This function
shifts, coadds, and normalizes these sources to provide a single
image of the source with increased signal-to-noise.  The method
for determining the shift is read from the configuration file.
In the configuration file, if CORMERGE is set to CENTROID, then
a centroiding algorithm is used to determine the shift.  If
CORMERGE is XCOR, a cross-correlation algorithm is used.  If
CORMERGE is HEADER, then header data is used to determine the
shift.  If CORMERGE is NOSHIFT (or the calculated shift is
greater than the MAXSHIFT parameter), then no shifting and
coadding is attempted.  IF the centroiding algorithm is selected
and it fails for any reason, then a header shift algorithm is
used instead.  After the image is merged, it is rotated by the
SKY_ANGL in the header and the WCS keywords are updated.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>data</strong><span class="classifier">numpy.ndarray</span></dt><dd><p>Input data array (nrow, ncol)</p>
</dd>
<dt><strong>header</strong><span class="classifier">astropy.io.fits.header.Header</span></dt><dd><p>Input FITS header; will be updated with a HISTORY message</p>
</dd>
<dt><strong>variance</strong><span class="classifier">numpy.ndarray, optional</span></dt><dd><p>Variance array (nrow, ncol) to update in parallel with the
data array</p>
</dd>
<dt><strong>normmap</strong><span class="classifier">numpy.ndarray, optional</span></dt><dd><p>Array (nrow, ncol) of normalization values for each pixel.
The normalization value corresponds to the number of
exposures in each pixel.</p>
</dd>
<dt><strong>skip_rotation</strong><span class="classifier">bool, optional</span></dt><dd><p>If True, will skip rotation correction.</p>
</dd>
<dt><strong>strip_border</strong><span class="classifier">bool, optional</span></dt><dd><p>If True, will strip off any unnecessary NaN padding at the
edges of the image, after rotation.</p>
</dd>
<dt><strong>rotation_order</strong><span class="classifier">int, optional</span></dt><dd><p>Order for spline interpolation when rotating</p>
</dd>
<dt><strong>resize</strong><span class="classifier">bool, optional</span></dt><dd><p>If True, image will be resized as necessary during merge.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>numpy.ndarray, np.ndarray</dt><dd><p>Merged array (nrow, ncol)
Propagated variance array (nrow, ncol)</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><h3>Page Contents</h3>
<ul>
<li><a class="reference internal" href="#">merge</a><ul>
<li><a class="reference internal" href="#sofia_redux.instruments.forcast.merge.merge"><code class="docutils literal notranslate"><span class="pre">merge()</span></code></a></li>
</ul>
</li>
</ul>


        </div>
      </div>
      <div class="clearer"></div>
    </div>
<footer class="footer">
  <p class="pull-right">
    <a href="../_sources/api/sofia_redux.instruments.forcast.merge.merge.rst.txt"
       rel="nofollow">Page Source</a> &nbsp;
    <a href="#">Back to Top</a></p>
  <p>
    &copy; Copyright 2023, SOFIA-USRA.<br/>
    Created using <a href="http://www.sphinx-doc.org/en/stable/">Sphinx</a> 7.1.2. &nbsp;
    Last built 13 Aug 2023. <br/>
  </p>
</footer>
  </body>
</html>