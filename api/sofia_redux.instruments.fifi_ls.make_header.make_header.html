<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>make_header &#8212; sofia_redux v1.3.4.dev0</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sofia.css?v=3fe2c07e" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=eafc0fe6" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    
    <script src="../_static/jquery.js?v=5d32c60e"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js?v=602f4d50"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=4825356b"></script>
    <script type="text/javascript" src="../_static/sidebar.js"></script>
    <script type="text/javascript" src="../_static/copybutton.js"></script>
    <link rel="icon" href="../_static/redux.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="readfits" href="sofia_redux.instruments.fifi_ls.readfits.readfits.html" />
    <link rel="prev" title="order_headers" href="sofia_redux.instruments.fifi_ls.make_header.order_headers.html" />
    <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,600' rel='stylesheet' type='text/css'/>

  </head><body>
<div class="topbar">
  <a class="brand" title="Documentation Home" href="../index.html"><span id="logotext1">SOFIA</span><span id="logotext2">Redux</span><span id="logotext3">:docs</span></a>
  <ul>
    <li><a class="homelink" title="SOFIA Homepage" href="https://www.sofia.usra.edu/"></a></li>
    <li><a title="General Index" href="../genindex.html">Index</a></li>
    <li><a title="Module Index" href="../py-modindex.html">Modules</a></li>
    <li>
      
      
<form action="../search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
      
    </li>
  </ul>
</div>

<div class="related">
    <h3>Navigation</h3>
    <ul>
      <li class="right">
	<a href="sofia_redux.instruments.fifi_ls.readfits.readfits.html" title="readfits">
	  next &raquo;
	</a>
      </li>
      <li class="right">
	<a href="sofia_redux.instruments.fifi_ls.make_header.order_headers.html" title="order_headers">
	  &laquo; previous
	</a>
	 |
      </li>
      <li>
	<a href="../index.html">sofia_redux v1.3.4.dev0</a>
	 &#187;
      </li>
      <li><a href="../sofia_redux/index.html" >SOFIA Redux</a> &#187;</li>
      <li><a href="../manuals/fifils/developers/developers.html" accesskey="U">FIFI-LS Redux Developer’s Manual</a> &#187;</li>
      
      <li>make_header</li> 
    </ul>
</div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="make-header">
<h1>make_header<a class="headerlink" href="#make-header" title="Permalink to this heading">¶</a></h1>
<dl class="py function">
<dt class="sig sig-object py" id="sofia_redux.instruments.fifi_ls.make_header.make_header">
<span class="sig-prename descclassname"><span class="pre">sofia_redux.instruments.fifi_ls.make_header.</span></span><span class="sig-name descname"><span class="pre">make_header</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">headers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">checkheader</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default_file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">comment_file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">check_all</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sofia_redux/instruments/fifi_ls/make_header.html#make_header"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sofia_redux.instruments.fifi_ls.make_header.make_header" title="Permalink to this definition">¶</a></dt>
<dd><p>Standardize and combine input headers.</p>
<p>Generates output headers for pipeline data products.</p>
<p>The procedure is:</p>
<blockquote>
<div><ol class="arabic">
<li><p>Read the header keyword defaults and requirements from
data/headerdef.dat and their associated default comments from
data/headercomment.dat.</p></li>
<li><p>Copy the earliest header for symmetric mode, or earliest A
header for C2NC2 mode.  “Earliest” is defined by DATE-OBS.</p></li>
<li><dl class="simple">
<dt>Loop through all keywords defined in headerdef.dat</dt><dd><ol class="loweralpha simple">
<li><p>Get the value from the header as defined in the configuration
algorithm.  The combination options are: and (for booleans),
concatendate unique values with commas (for string values),
use default value, use last value (i.e. latest according to
DATE-OBS), or (for booleans), sum (for numerical values),
mean (for numerical values), use the first value.  The default
and most common case is to use the first value.  The
combined keyword value is written to the output header.</p></li>
<li><p>Check the value against requirements if desired.  Required
keywords are checked for presence, checked against a
specified data type (float, int, long, string, bool), and
may additionally be checked against an enumerated value or
min/max value range.  If requirements are not met, or if a
defined keyword is not found in the input header, it is set
to the default value in the output header.</p></li>
</ol>
</dd>
</dl>
</li>
<li><p>Some additional values are added or modified in the output
header:</p>
<blockquote>
<div><ul class="simple">
<li><p>ASSC_AOR is copied from AOR_ID if not present</p></li>
<li><p>ASSC_MSN is copied from MISSN-ID if not present</p></li>
<li><p>DATE is set to the current date/time</p></li>
<li><p>PROCSTAT is set to LEVEL_2 (unless it is already LEVEL_3
or LEVEL_4</p></li>
<li><p>FILENUM is set from the raw filename if not present, or
from the range of input file numbers (first-last)</p></li>
<li><p>ASSC_OBS is copied from OBS_ID if not present</p></li>
<li><p>OBS_ID is prepended with P_ if not already done</p></li>
</ul>
</div></blockquote>
</li>
</ol>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>headers</strong><span class="classifier">array_like of fits.Header, optional</span></dt><dd><p>array of input FITS headers</p>
</dd>
<dt><strong>checkheader</strong><span class="classifier">bool, optional</span></dt><dd><p>If True, will check keywords against SOFIA requirements.  If
set, the return value will be a 2-tuple rather than a FITS
header (see Return values).</p>
</dd>
<dt><strong>default_file</strong><span class="classifier">str, optional</span></dt><dd><p>Path to the header keyword default file</p>
</dd>
<dt><strong>comment_file</strong><span class="classifier">str, optional</span></dt><dd><p>Path to the header keyword comment file</p>
</dd>
<dt><strong>check_all</strong><span class="classifier">bool, optional</span></dt><dd><p>If <code class="xref py py-obj docutils literal notranslate"><span class="pre">checkheader</span></code> is True and a failure was encountered, keep
checking the remainder of the keyword values and output warning
messages.  Otherwise, the default is to return failure at the
first bad keyword/value.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>fits.Header</dt><dd><p>a combined, standardized FITS header
if checkheader is True then the return value will be a 2-tuple.
The first element will be the header, and the second will be
a boolean value indicating whether the header was created
without any errors (False = errors were encountered).</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><h3>Page Contents</h3>
<ul>
<li><a class="reference internal" href="#">make_header</a><ul>
<li><a class="reference internal" href="#sofia_redux.instruments.fifi_ls.make_header.make_header"><code class="docutils literal notranslate"><span class="pre">make_header()</span></code></a></li>
</ul>
</li>
</ul>


        </div>
      </div>
      <div class="clearer"></div>
    </div>
<footer class="footer">
  <p class="pull-right">
    <a href="../_sources/api/sofia_redux.instruments.fifi_ls.make_header.make_header.rst.txt"
       rel="nofollow">Page Source</a> &nbsp;
    <a href="#">Back to Top</a></p>
  <p>
    &copy; Copyright 2023, SOFIA-USRA.<br/>
    Created using <a href="http://www.sphinx-doc.org/en/stable/">Sphinx</a> 7.1.2. &nbsp;
    Last built 13 Aug 2023. <br/>
  </p>
</footer>
  </body>
</html>