<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>check_orders &#8212; sofia_redux v1.3.4.dev0</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sofia.css?v=3fe2c07e" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=eafc0fe6" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    
    <script src="../_static/jquery.js?v=5d32c60e"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js?v=602f4d50"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=4825356b"></script>
    <script type="text/javascript" src="../_static/sidebar.js"></script>
    <script type="text/javascript" src="../_static/copybutton.js"></script>
    <link rel="icon" href="../_static/redux.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="check_orders_with_bounds" href="sofia_redux.toolkit.resampling.check_orders_with_bounds.html" />
    <link rel="prev" title="check_edges" href="sofia_redux.toolkit.resampling.check_edges.html" />
    <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,600' rel='stylesheet' type='text/css'/>

  </head><body>
<div class="topbar">
  <a class="brand" title="Documentation Home" href="../index.html"><span id="logotext1">SOFIA</span><span id="logotext2">Redux</span><span id="logotext3">:docs</span></a>
  <ul>
    <li><a class="homelink" title="SOFIA Homepage" href="https://www.sofia.usra.edu/"></a></li>
    <li><a title="General Index" href="../genindex.html">Index</a></li>
    <li><a title="Module Index" href="../py-modindex.html">Modules</a></li>
    <li>
      
      
<form action="../search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
      
    </li>
  </ul>
</div>

<div class="related">
    <h3>Navigation</h3>
    <ul>
      <li class="right">
	<a href="sofia_redux.toolkit.resampling.check_orders_with_bounds.html" title="check_orders_with_bounds">
	  next &raquo;
	</a>
      </li>
      <li class="right">
	<a href="sofia_redux.toolkit.resampling.check_edges.html" title="check_edges">
	  &laquo; previous
	</a>
	 |
      </li>
      <li>
	<a href="../index.html">sofia_redux v1.3.4.dev0</a>
	 &#187;
      </li>
      <li><a href="../sofia_redux/index.html" >SOFIA Redux</a> &#187;</li>
      <li><a href="../manuals/fifils/developers/developers.html" accesskey="U">FIFI-LS Redux Developer’s Manual</a> &#187;</li>
      
      <li>check_orders</li> 
    </ul>
</div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="check-orders">
<h1>check_orders<a class="headerlink" href="#check-orders" title="Permalink to this heading">¶</a></h1>
<dl class="py function">
<dt class="sig sig-object py" id="sofia_redux.toolkit.resampling.check_orders">
<span class="sig-prename descclassname"><span class="pre">sofia_redux.toolkit.resampling.</span></span><span class="sig-name descname"><span class="pre">check_orders</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">orders</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">coordinates</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reference</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">algorithm</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">minimum_points</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">required</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">counts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sofia_redux/toolkit/resampling/resample_utils.html#check_orders"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sofia_redux.toolkit.resampling.check_orders" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks the sample distribution is suitable for a polynomial fit order.</p>
<p>For a polynomial fit to be successful at a given order, one needs to
ensure that the sample distribution is suitable for such a fit.  At a
minimum, there need to be enough samples to derive a fit.  However, unless
the samples are known to be distributed in such a way where a fit is always
possible (such as regularly spaced samples), there is the possibility that
the fit may be under-determined.  For example, it is not possible to
perform any other fit than the mean of sample values (order 0) if the
samples all share the same coordinate.</p>
<p>This problem is compounded by the use of <code class="xref py py-mod docutils literal notranslate"><span class="pre">numba</span></code> which does not allow
any exception handling.  If a fit fails at a single reference position,
the whole algorithm will fail.</p>
<p>There are several algorithms available, ordered in decreasing robustness,
but increasing speed.  The chosen algorithm must be supplied using an
integer label (because <code class="xref py py-mod docutils literal notranslate"><span class="pre">numba</span></code>).  Please see the relevant function
listed in the table below for a more detailed description of each.  The
<code class="xref py py-obj docutils literal notranslate"><span class="pre">order_algorithm</span></code> parameter is supplied to the main resampling algorithm
during <code class="xref py py-obj docutils literal notranslate"><span class="pre">__init__</span></code> and is used to select the relevant algorithm.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>algorithm</p></th>
<th class="head"><p>Function</p></th>
<th class="head"><p>order_algorithm</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p><a class="reference internal" href="sofia_redux.toolkit.resampling.check_orders_with_bounds.html#sofia_redux.toolkit.resampling.check_orders_with_bounds" title="sofia_redux.toolkit.resampling.check_orders_with_bounds"><code class="xref py py-func docutils literal notranslate"><span class="pre">check_orders_with_bounds()</span></code></a></p></td>
<td><p>‘bounded’</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p><a class="reference internal" href="sofia_redux.toolkit.resampling.check_orders_without_bounds.html#sofia_redux.toolkit.resampling.check_orders_without_bounds" title="sofia_redux.toolkit.resampling.check_orders_without_bounds"><code class="xref py py-func docutils literal notranslate"><span class="pre">check_orders_without_bounds()</span></code></a></p></td>
<td><p>‘extrapolate’</p></td>
</tr>
<tr class="row-even"><td><p>3</p></td>
<td><p><a class="reference internal" href="sofia_redux.toolkit.resampling.check_orders_with_counts.html#sofia_redux.toolkit.resampling.check_orders_with_counts" title="sofia_redux.toolkit.resampling.check_orders_with_counts"><code class="xref py py-func docutils literal notranslate"><span class="pre">check_orders_with_counts()</span></code></a></p></td>
<td><p>‘counts’</p></td>
</tr>
</tbody>
</table>
<p>Generally, <a class="reference internal" href="sofia_redux.toolkit.resampling.check_orders_with_bounds.html#sofia_redux.toolkit.resampling.check_orders_with_bounds" title="sofia_redux.toolkit.resampling.check_orders_with_bounds"><code class="xref py py-func docutils literal notranslate"><span class="pre">check_orders_with_bounds()</span></code></a> is the most robust and ensures
that a fit will not only succeed, but is not likely to deviate widely from
the expected result.  The <a class="reference internal" href="sofia_redux.toolkit.resampling.check_orders_without_bounds.html#sofia_redux.toolkit.resampling.check_orders_without_bounds" title="sofia_redux.toolkit.resampling.check_orders_without_bounds"><code class="xref py py-func docutils literal notranslate"><span class="pre">check_orders_without_bounds()</span></code></a> function
should also allow fits to succeed, but allow fits to be generated away from
the sample distribution.  This may be desirable, for example, if one is
resampling an image and wishes to perform fits close to the edge.
Finally, <a class="reference internal" href="sofia_redux.toolkit.resampling.check_orders_with_counts.html#sofia_redux.toolkit.resampling.check_orders_with_counts" title="sofia_redux.toolkit.resampling.check_orders_with_counts"><code class="xref py py-func docutils literal notranslate"><span class="pre">check_orders_with_counts()</span></code></a> is fast, but there is a decent
possibility that the fit will fail if the user cannot guarantee that the
samples are distributed appropriately.</p>
<p>In rare cases, a distribution of collinear samples, not aligned along any
dimensional axis may pass the <a class="reference internal" href="#sofia_redux.toolkit.resampling.check_orders" title="sofia_redux.toolkit.resampling.check_orders"><code class="xref py py-obj docutils literal notranslate"><span class="pre">check_orders</span></code></a> test causing resampling
algorithm to fail.  In this case, please consider using
<a class="reference internal" href="sofia_redux.toolkit.resampling.check_edge_with_distribution.html#sofia_redux.toolkit.resampling.check_edge_with_distribution" title="sofia_redux.toolkit.resampling.check_edge_with_distribution"><code class="xref py py-func docutils literal notranslate"><span class="pre">check_edge_with_distribution()</span></code></a> to perform such a check.  This may
be invoked by supplying <code class="xref py py-obj docutils literal notranslate"><span class="pre">edge_algorithm='distribution'</span></code> during the
initialization of the main resampling algorithm.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>algorithm</strong><span class="classifier">int</span></dt><dd><p>An integer specifying the order checking algorithm to use.  If an
invalid option is supplied (not listed in the table above), the return
value of -1 will abort any subsequent fitting.</p>
</dd>
<dt><strong>orders</strong><span class="classifier">numpy.ndarray of int</span></dt><dd><p>The desired order of the fit as a (1,) or (n_dimensions,) array.  If
only a single value is supplied, it will be applied over all
dimensions.  This serves as an upper limit for the check.  If the
samples are distributed in a way that allows for a fit to be performed
using <code class="xref py py-obj docutils literal notranslate"><span class="pre">orders</span></code>, the return value will also be <code class="xref py py-obj docutils literal notranslate"><span class="pre">orders</span></code>.</p>
</dd>
<dt><strong>coordinates</strong><span class="classifier">numpy.ndarray (n_dimensions, n_samples)</span></dt><dd><p>The coordinates of the sample distribution.  Not used by the <code class="xref py py-obj docutils literal notranslate"><span class="pre">counts</span></code>
algorithm, but must still be supplied as an array with the correct
dimensions.</p>
</dd>
<dt><strong>reference</strong><span class="classifier">numpy.ndarray (n_dimensions,)</span></dt><dd><p>The coordinates of the point at which to perform a fit.  Only required
by the ‘bounded’ algorithm, but a value of the correct array shape must
still be supplied.</p>
</dd>
<dt><strong>mask</strong><span class="classifier">numpy.ndarray of bool (n_samples,), optional</span></dt><dd><p>An optional mask where <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a> values indicate the associated sample
should not be included in determining the maximum order.</p>
</dd>
<dt><strong>minimum_points</strong><span class="classifier">int, optional</span></dt><dd><p>The minimum number of points required to perform a fit of the desired
order, optionally passed in for speed if pre-calculated.  Only used by
the ‘counts’ algorithm.</p>
</dd>
<dt><strong>required</strong><span class="classifier">bool, optional</span></dt><dd><p>If required is <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a>, the maximum available order given the
distribution will be returned (up to a maximum of <code class="xref py py-obj docutils literal notranslate"><span class="pre">orders</span></code>).  If
required is <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>, and the maximum available order is less than
<code class="xref py py-obj docutils literal notranslate"><span class="pre">orders</span></code>, the first element of the return value will be set to -1,
indicating the criteria was not met.</p>
</dd>
<dt><strong>counts</strong><span class="classifier">int, optional</span></dt><dd><p>This is required by the ‘counts’ algorithm.  If <code class="xref py py-obj docutils literal notranslate"><span class="pre">counts</span></code> &lt; 0, it will
be determined by sum(mask).  If counts is less than zero, and a mask
is not supplied, not fit will be performed.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>maximum_orders</strong><span class="classifier">numpy.ndarray</span></dt><dd><p>An array of shape (1,) or (n_dimensions,) based on whether a single
<code class="xref py py-obj docutils literal notranslate"><span class="pre">orders</span></code> was passed in for all dimensions, or each dimension has a
separate order requirement.  If <code class="xref py py-obj docutils literal notranslate"><span class="pre">required</span></code> was set to <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>, and the
sample distribution did not allow for the requested order, the first
element will be set to -1.  Otherwise, if <code class="xref py py-obj docutils literal notranslate"><span class="pre">required</span></code> was <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a>, the
maximum order for each dimension will be returned.  If a single <code class="xref py py-obj docutils literal notranslate"><span class="pre">orders</span></code>
was to be applied over all dimensions, the return value will also be
of size 1, but contains the min(maximum_order) over all dimensions.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><h3>Page Contents</h3>
<ul>
<li><a class="reference internal" href="#">check_orders</a><ul>
<li><a class="reference internal" href="#sofia_redux.toolkit.resampling.check_orders"><code class="docutils literal notranslate"><span class="pre">check_orders()</span></code></a></li>
</ul>
</li>
</ul>


        </div>
      </div>
      <div class="clearer"></div>
    </div>
<footer class="footer">
  <p class="pull-right">
    <a href="../_sources/api/sofia_redux.toolkit.resampling.check_orders.rst.txt"
       rel="nofollow">Page Source</a> &nbsp;
    <a href="#">Back to Top</a></p>
  <p>
    &copy; Copyright 2023, SOFIA-USRA.<br/>
    Created using <a href="http://www.sphinx-doc.org/en/stable/">Sphinx</a> 7.1.2. &nbsp;
    Last built 13 Aug 2023. <br/>
  </p>
</footer>
  </body>
</html>