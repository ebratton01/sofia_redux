<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>local_surface_fit &#8212; sofia_redux v1.3.4.dev0</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sofia.css?v=3fe2c07e" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=eafc0fe6" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    
    <script src="../_static/jquery.js?v=5d32c60e"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js?v=602f4d50"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=4825356b"></script>
    <script type="text/javascript" src="../_static/sidebar.js"></script>
    <script type="text/javascript" src="../_static/copybutton.js"></script>
    <link rel="icon" href="../_static/redux.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="make_hdul" href="sofia_redux.instruments.fifi_ls.resample.make_hdul.html" />
    <link rel="prev" title="rbf_mean_combine" href="sofia_redux.instruments.fifi_ls.resample.rbf_mean_combine.html" />
    <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,600' rel='stylesheet' type='text/css'/>

  </head><body>
<div class="topbar">
  <a class="brand" title="Documentation Home" href="../index.html"><span id="logotext1">SOFIA</span><span id="logotext2">Redux</span><span id="logotext3">:docs</span></a>
  <ul>
    <li><a class="homelink" title="SOFIA Homepage" href="https://www.sofia.usra.edu/"></a></li>
    <li><a title="General Index" href="../genindex.html">Index</a></li>
    <li><a title="Module Index" href="../py-modindex.html">Modules</a></li>
    <li>
      
      
<form action="../search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
      
    </li>
  </ul>
</div>

<div class="related">
    <h3>Navigation</h3>
    <ul>
      <li class="right">
	<a href="sofia_redux.instruments.fifi_ls.resample.make_hdul.html" title="make_hdul">
	  next &raquo;
	</a>
      </li>
      <li class="right">
	<a href="sofia_redux.instruments.fifi_ls.resample.rbf_mean_combine.html" title="rbf_mean_combine">
	  &laquo; previous
	</a>
	 |
      </li>
      <li>
	<a href="../index.html">sofia_redux v1.3.4.dev0</a>
	 &#187;
      </li>
      <li><a href="../sofia_redux/index.html" >SOFIA Redux</a> &#187;</li>
      <li><a href="../manuals/fifils/developers/developers.html" accesskey="U">FIFI-LS Redux Developer’s Manual</a> &#187;</li>
      
      <li>local_surface_fit</li> 
    </ul>
</div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="local-surface-fit">
<h1>local_surface_fit<a class="headerlink" href="#local-surface-fit" title="Permalink to this heading">¶</a></h1>
<dl class="py function">
<dt class="sig sig-object py" id="sofia_redux.instruments.fifi_ls.resample.local_surface_fit">
<span class="sig-prename descclassname"><span class="pre">sofia_redux.instruments.fifi_ls.resample.</span></span><span class="sig-name descname"><span class="pre">local_surface_fit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">combined</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">grid_info</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">adaptive_threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">adaptive_algorithm</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'scaled'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">error_weighting</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">smoothing</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">order</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">robust</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">neg_threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fit_threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">edge_threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skip_uncorrected</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">jobs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">check_memory</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sofia_redux/instruments/fifi_ls/resample.html#local_surface_fit"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sofia_redux.instruments.fifi_ls.resample.local_surface_fit" title="Permalink to this definition">¶</a></dt>
<dd><p>Resamples combined data on regular grid using local polynomial fitting.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>combined</strong><span class="classifier">dict</span></dt><dd><p>Dictionary containing combined data. Returned from <a class="reference internal" href="sofia_redux.instruments.fifi_ls.resample.combine_files.html#sofia_redux.instruments.fifi_ls.resample.combine_files" title="sofia_redux.instruments.fifi_ls.resample.combine_files"><code class="xref py py-obj docutils literal notranslate"><span class="pre">combine_files</span></code></a>.</p>
</dd>
<dt><strong>grid_info</strong><span class="classifier">dict</span></dt><dd><p>Dictionary containing output grid coordinates and other necessary
information.  Returned from <a class="reference internal" href="sofia_redux.instruments.fifi_ls.resample.get_grid_info.html#sofia_redux.instruments.fifi_ls.resample.get_grid_info" title="sofia_redux.instruments.fifi_ls.resample.get_grid_info"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_grid_info</span></code></a>.</p>
</dd>
<dt><strong>window</strong><span class="classifier">array_like of float, optional</span></dt><dd><p>Region to consider for local polynomial fits, given as a factor
of the mean FWHM, in the (x, y, w) dimensions. Default is
(3.0, 3.0, 0.5).</p>
</dd>
<dt><strong>adaptive_threshold</strong><span class="classifier">array_like of float, optional</span></dt><dd><p>If &gt; 0, determines how the adaptive smoothing algorithm
will attempt to fit data.  The optimal value is 1.  Will
automatically enable both distance and error weighting.  For
dimensions that have adaptive smoothing enabled, <code class="xref py py-obj docutils literal notranslate"><span class="pre">smoothing</span></code>
should be set to the Gaussian width of the data in units of <code class="xref py py-obj docutils literal notranslate"><span class="pre">window</span></code>.
For other dimensions not using adaptive smoothing, <code class="xref py py-obj docutils literal notranslate"><span class="pre">smoothing</span></code>
has the usual definition. Adaptive smoothing is disabled by
default: (0.0, 0.0, 0.0).</p>
</dd>
<dt><strong>adaptive_algorithm</strong><span class="classifier">{‘scaled’, ‘shaped’}, optional</span></dt><dd><p>Determines the type of variation allowed for the adaptive kernel.
If ‘scaled’, only the kernel size is allowed to vary.  If ‘shaped’,
kernel shape may also vary.</p>
</dd>
<dt><strong>error_weighting</strong><span class="classifier">bool, optional</span></dt><dd><p>If True, errors will be used to weight the flux fits.</p>
</dd>
<dt><strong>smoothing</strong><span class="classifier">array_like of float, optional</span></dt><dd><p>Distance over which to smooth the data, given as a factor of the
mean FWHM, in the (x, y, w) dimensions.  If <code class="xref py py-obj docutils literal notranslate"><span class="pre">adaptive_threshold</span></code> is
set for a certain dimension, smoothing should be set to 1.0 for that
dimension. Default is (1.75, 1.75, 0.25).</p>
</dd>
<dt><strong>order</strong><span class="classifier">int or array of int, optional</span></dt><dd><p>Maximum order of local polynomial fits, in the (x, y, w)
dimensions.</p>
</dd>
<dt><strong>robust</strong><span class="classifier">float, optional</span></dt><dd><p>Rejection threshold for input data to local fits, given as a
factor of the standard deviation.</p>
</dd>
<dt><strong>neg_threshold</strong><span class="classifier">float, optional</span></dt><dd><p>First-pass rejection threshold for negative input data, given
as a factor of the standard deviation; if None or &lt;= 0,
first-pass rejection will not be performed.</p>
</dd>
<dt><strong>fit_threshold</strong><span class="classifier">float, optional</span></dt><dd><p>Rejection threshold for output fit values, given as a factor
of the standard deviation in the input data.  If exceeded,
weighted mean value is used in place of fit.</p>
</dd>
<dt><strong>edge_threshold</strong><span class="classifier">array_like of float, optional</span></dt><dd><p>Threshold for edge marking for (x, y, w) dimensions. Values
should be between 0 and 1; higher values mean more edge pixels
marked. Default is (0.7, 0.7, 0.5).</p>
</dd>
<dt><strong>skip_uncorrected: bool, optional</strong></dt><dd><p>If set, the uncorrected flux cube will not be computed, even
if present in the input data.  This option is primarily intended
for testing or quicklook, when the full data product is not needed.</p>
</dd>
<dt><strong>jobs</strong><span class="classifier">int, optional</span></dt><dd><p>Specifies the maximum number of concurrently running jobs.
Values of 0 or 1 will result in serial processing.  A negative
value sets jobs to <code class="xref py py-obj docutils literal notranslate"><span class="pre">n_cpus</span> <span class="pre">+</span> <span class="pre">1</span> <span class="pre">+</span> <span class="pre">jobs</span></code> such that -1 would use
all cpus, and -2 would use all but one cpu.</p>
</dd>
<dt><strong>check_memory</strong><span class="classifier">bool, optional</span></dt><dd><p>If set, expected memory use will be checked and used to limit
the number of jobs if necessary.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><h3>Page Contents</h3>
<ul>
<li><a class="reference internal" href="#">local_surface_fit</a><ul>
<li><a class="reference internal" href="#sofia_redux.instruments.fifi_ls.resample.local_surface_fit"><code class="docutils literal notranslate"><span class="pre">local_surface_fit()</span></code></a></li>
</ul>
</li>
</ul>


        </div>
      </div>
      <div class="clearer"></div>
    </div>
<footer class="footer">
  <p class="pull-right">
    <a href="../_sources/api/sofia_redux.instruments.fifi_ls.resample.local_surface_fit.rst.txt"
       rel="nofollow">Page Source</a> &nbsp;
    <a href="#">Back to Top</a></p>
  <p>
    &copy; Copyright 2023, SOFIA-USRA.<br/>
    Created using <a href="http://www.sphinx-doc.org/en/stable/">Sphinx</a> 7.1.2. &nbsp;
    Last built 13 Aug 2023. <br/>
  </p>
</footer>
  </body>
</html>