<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>box_convolve &#8212; sofia_redux v1.3.4.dev0</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sofia.css?v=3fe2c07e" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=eafc0fe6" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    
    <script src="../_static/jquery.js?v=5d32c60e"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js?v=602f4d50"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=4825356b"></script>
    <script type="text/javascript" src="../_static/sidebar.js"></script>
    <script type="text/javascript" src="../_static/copybutton.js"></script>
    <link rel="icon" href="../_static/redux.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="get_search_model" href="sofia_redux.toolkit.fitting.fitpeaks1d.get_search_model.html" />
    <link rel="prev" title="dofit" href="sofia_redux.toolkit.fitting.fitpeaks1d.dofit.html" />
    <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,600' rel='stylesheet' type='text/css'/>

  </head><body>
<div class="topbar">
  <a class="brand" title="Documentation Home" href="../index.html"><span id="logotext1">SOFIA</span><span id="logotext2">Redux</span><span id="logotext3">:docs</span></a>
  <ul>
    <li><a class="homelink" title="SOFIA Homepage" href="https://www.sofia.usra.edu/"></a></li>
    <li><a title="General Index" href="../genindex.html">Index</a></li>
    <li><a title="Module Index" href="../py-modindex.html">Modules</a></li>
    <li>
      
      
<form action="../search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
      
    </li>
  </ul>
</div>

<div class="related">
    <h3>Navigation</h3>
    <ul>
      <li class="right">
	<a href="sofia_redux.toolkit.fitting.fitpeaks1d.get_search_model.html" title="get_search_model">
	  next &raquo;
	</a>
      </li>
      <li class="right">
	<a href="sofia_redux.toolkit.fitting.fitpeaks1d.dofit.html" title="dofit">
	  &laquo; previous
	</a>
	 |
      </li>
      <li>
	<a href="../index.html">sofia_redux v1.3.4.dev0</a>
	 &#187;
      </li>
      <li><a href="../sofia_redux/index.html" >SOFIA Redux</a> &#187;</li>
      <li><a href="../manuals/exes/developers/developers.html" accesskey="U">EXES Redux Developer’s Manual</a> &#187;</li>
      
      <li>box_convolve</li> 
    </ul>
</div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="box-convolve">
<h1>box_convolve<a class="headerlink" href="#box-convolve" title="Permalink to this heading">¶</a></h1>
<dl class="py function">
<dt class="sig sig-object py" id="sofia_redux.toolkit.fitting.fitpeaks1d.box_convolve">
<span class="sig-prename descclassname"><span class="pre">sofia_redux.toolkit.fitting.fitpeaks1d.</span></span><span class="sig-name descname"><span class="pre">box_convolve</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">box_class</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">box_width</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">box_x</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_x</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">box_var</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">box_params</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sofia_redux/toolkit/fitting/fitpeaks1d.html#box_convolve"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sofia_redux.toolkit.fitting.fitpeaks1d.box_convolve" title="Permalink to this definition">¶</a></dt>
<dd><p>Convolve a model with a box (or another model)</p>
<p>Standard astropy models are easy to convolve (multiply).  Unfortunately,
during fitting we want the result of this convolution to be treated
as a single model, not have the box fitted as well as the original
model.  <a class="reference internal" href="#sofia_redux.toolkit.fitting.fitpeaks1d.box_convolve" title="sofia_redux.toolkit.fitting.fitpeaks1d.box_convolve"><code class="xref py py-obj docutils literal notranslate"><span class="pre">box_convolve</span></code></a> anchors the center of the <code class="xref py py-obj docutils literal notranslate"><span class="pre">box_class</span></code>
to the center of the <code class="xref py py-obj docutils literal notranslate"><span class="pre">model</span></code>.  All other box parameters are held
constant.  As a convenience, <code class="xref py py-obj docutils literal notranslate"><span class="pre">box_width</span></code> is supplied so that the
user can define a fixed width to the box (which can also be defined
using <code class="xref py py-obj docutils literal notranslate"><span class="pre">box_params</span></code>).  Generally, all astropy models have a fixed
amplitude of 1, so in simple cases only the width should be
specified.  However, if using a more complex model then additional
parameters should be specified via <code class="xref py py-obj docutils literal notranslate"><span class="pre">box_params</span></code>.</p>
<p>In addition, the user may also easily select a single parameter of
the <code class="xref py py-obj docutils literal notranslate"><span class="pre">box_class</span></code> to be equal to a single parameter of the <code class="xref py py-obj docutils literal notranslate"><span class="pre">model</span></code>
multiplied by some scaling factor.  <a class="reference internal" href="sofia_redux.toolkit.fitting.fitpeaks1d.fitpeaks1d.html#sofia_redux.toolkit.fitting.fitpeaks1d.fitpeaks1d" title="sofia_redux.toolkit.fitting.fitpeaks1d.fitpeaks1d"><code class="xref py py-obj docutils literal notranslate"><span class="pre">fitpeaks1d</span></code></a> uses this by
default to convolve a Gaussian function with a step function that
will always be set to a multiple factor of the FWHM.  This is
incredibly useful when trying to get a good fit on a peak by only
using data in range of the peaks significance; not the entire
set of data which may contain artifacts that will interfere with
the fit.  To do this set <code class="xref py py-obj docutils literal notranslate"><span class="pre">box_width</span></code> to (parameter, factor) of
the model.  For example (‘stddev’, 6) would center a box function
with a width of 6 times the FWHM of a Gaussian over the original
Gaussian.</p>
<p>Note though, that box_width is simply a convenience argument.  If
you know what you are doing then you can tie or fix multiple
parameters between the two models.  Look at the code in <a class="reference internal" href="#sofia_redux.toolkit.fitting.fitpeaks1d.box_convolve" title="sofia_redux.toolkit.fitting.fitpeaks1d.box_convolve"><code class="xref py py-obj docutils literal notranslate"><span class="pre">box_convolve</span></code></a>
for an example or how one should use the ‘tied’, ‘bounds’, and
‘fixed’ keywords in the astropy.modeling documentation.  These
may be suppled to <a class="reference internal" href="#sofia_redux.toolkit.fitting.fitpeaks1d.box_convolve" title="sofia_redux.toolkit.fitting.fitpeaks1d.box_convolve"><code class="xref py py-obj docutils literal notranslate"><span class="pre">box_convolve</span></code></a> via kwargs.  kwargs is applied
to the model at the very end of the algorithm, so anything here
will override any previous logic.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>model</strong><span class="classifier">astropy.modeling.Fittable1DModel (class or instance)</span></dt><dd><p>model on which to apply box function</p>
</dd>
<dt><strong>box_class</strong><span class="classifier">astropy.modeling.Fittable1DModel (class)</span></dt><dd><p>The box or model to convolve <code class="xref py py-obj docutils literal notranslate"><span class="pre">model</span></code> with.</p>
</dd>
<dt><strong>box_width</strong><span class="classifier">(float or int) or (2-tuple of (str, float)), optional</span></dt><dd><p>If int or float, specifies the fixed width of the box.
Using the 2-tuple form scales the width of the box to be
equal to box_width[1] * (the parameter box_width[0]) in
<code class="xref py py-obj docutils literal notranslate"><span class="pre">model</span></code>.  If set to None, the default values of the box
model or those set in ‘box_params` will define a constant
box width.</p>
</dd>
<dt><strong>box_x</strong><span class="classifier">str, optional</span></dt><dd><p>Determines the <code class="xref py py-obj docutils literal notranslate"><span class="pre">box_class</span></code> parameter to always be set equal to
the <code class="xref py py-obj docutils literal notranslate"><span class="pre">model</span></code> <code class="xref py py-obj docutils literal notranslate"><span class="pre">model_x</span></code> parameter.  If omitted, an attempt will be
made to determine what the x-centering parameter is for the box.</p>
</dd>
<dt><strong>model_x</strong><span class="classifier">str, optional</span></dt><dd><p>Determines which <code class="xref py py-obj docutils literal notranslate"><span class="pre">model</span></code> parameter that the <code class="xref py py-obj docutils literal notranslate"><span class="pre">box_x</span></code> parameter
of the <code class="xref py py-obj docutils literal notranslate"><span class="pre">box_class</span></code> will always be set equal to.  If omitted, an
attempt will be made to determine what the x-centering parameter
is for the <code class="xref py py-obj docutils literal notranslate"><span class="pre">model</span></code>.</p>
</dd>
<dt><strong>box_var</strong><span class="classifier">str, optional</span></dt><dd><p>Determines what the “width” parameter of the box is in relation
to the <code class="xref py py-obj docutils literal notranslate"><span class="pre">box_width</span></code> parameter and its uses.  If omitted, an
attempt will be made to determine the “width” parameter name
of the box model.</p>
</dd>
<dt><strong>box_params</strong><span class="classifier">dict, optional</span></dt><dd><p>Used to set initial <code class="xref py py-obj docutils literal notranslate"><span class="pre">box_class</span></code> parameters.  All parameters set
here will be fixed unless overriden by other keyword options.
Please see <code class="xref py py-obj docutils literal notranslate"><span class="pre">astropy.modeling.models</span></code> for a list of keywords
that can be supplied.</p>
</dd>
<dt><strong>kwargs</strong><span class="classifier">dict, optional</span></dt><dd><p>keyword values to be applied that will override everything else.
keys should be the name of the output model attributes and values
should be the values you wish to set.  Dictionaries are applied
recursively.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>result</strong><span class="classifier">instance of astropy.modeling.Fittable1DModel</span></dt><dd><p>The resulting <code class="xref py py-obj docutils literal notranslate"><span class="pre">model</span></code> * box_model</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><h3>Page Contents</h3>
<ul>
<li><a class="reference internal" href="#">box_convolve</a><ul>
<li><a class="reference internal" href="#sofia_redux.toolkit.fitting.fitpeaks1d.box_convolve"><code class="docutils literal notranslate"><span class="pre">box_convolve()</span></code></a></li>
</ul>
</li>
</ul>


        </div>
      </div>
      <div class="clearer"></div>
    </div>
<footer class="footer">
  <p class="pull-right">
    <a href="../_sources/api/sofia_redux.toolkit.fitting.fitpeaks1d.box_convolve.rst.txt"
       rel="nofollow">Page Source</a> &nbsp;
    <a href="#">Back to Top</a></p>
  <p>
    &copy; Copyright 2023, SOFIA-USRA.<br/>
    Created using <a href="http://www.sphinx-doc.org/en/stable/">Sphinx</a> 7.1.2. &nbsp;
    Last built 13 Aug 2023. <br/>
  </p>
</footer>
  </body>
</html>