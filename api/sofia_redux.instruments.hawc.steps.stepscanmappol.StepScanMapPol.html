<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>StepScanMapPol &#8212; sofia_redux v1.3.4.dev0</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sofia.css?v=3fe2c07e" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=eafc0fe6" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    
    <script src="../_static/jquery.js?v=5d32c60e"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js?v=602f4d50"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=4825356b"></script>
    <script type="text/javascript" src="../_static/sidebar.js"></script>
    <script type="text/javascript" src="../_static/copybutton.js"></script>
    <link rel="icon" href="../_static/redux.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="StepScanStokes" href="sofia_redux.instruments.hawc.steps.stepscanstokes.StepScanStokes.html" />
    <link rel="prev" title="StepScanMapFocus" href="sofia_redux.instruments.hawc.steps.stepscanmapfocus.StepScanMapFocus.html" />
    <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,600' rel='stylesheet' type='text/css'/>

  </head><body>
<div class="topbar">
  <a class="brand" title="Documentation Home" href="../index.html"><span id="logotext1">SOFIA</span><span id="logotext2">Redux</span><span id="logotext3">:docs</span></a>
  <ul>
    <li><a class="homelink" title="SOFIA Homepage" href="https://www.sofia.usra.edu/"></a></li>
    <li><a title="General Index" href="../genindex.html">Index</a></li>
    <li><a title="Module Index" href="../py-modindex.html">Modules</a></li>
    <li>
      
      
<form action="../search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
      
    </li>
  </ul>
</div>

<div class="related">
    <h3>Navigation</h3>
    <ul>
      <li class="right">
	<a href="sofia_redux.instruments.hawc.steps.stepscanstokes.StepScanStokes.html" title="StepScanStokes">
	  next &raquo;
	</a>
      </li>
      <li class="right">
	<a href="sofia_redux.instruments.hawc.steps.stepscanmapfocus.StepScanMapFocus.html" title="StepScanMapFocus">
	  &laquo; previous
	</a>
	 |
      </li>
      <li>
	<a href="../index.html">sofia_redux v1.3.4.dev0</a>
	 &#187;
      </li>
      <li><a href="../sofia_redux/index.html" >SOFIA Redux</a> &#187;</li>
      <li><a href="../manuals/hawc/developers/developers.html" accesskey="U">HAWC+ DRP Developer’s Manual</a> &#187;</li>
      
      <li>StepScanMapPol</li> 
    </ul>
</div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="stepscanmappol">
<h1>StepScanMapPol<a class="headerlink" href="#stepscanmappol" title="Permalink to this heading">¶</a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="sofia_redux.instruments.hawc.steps.stepscanmappol.StepScanMapPol">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sofia_redux.instruments.hawc.steps.stepscanmappol.</span></span><span class="sig-name descname"><span class="pre">StepScanMapPol</span></span><a class="reference internal" href="../_modules/sofia_redux/instruments/hawc/steps/stepscanmappol.html#StepScanMapPol"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sofia_redux.instruments.hawc.steps.stepscanmappol.StepScanMapPol" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="sofia_redux.instruments.hawc.stepmoparent.StepMOParent.html#sofia_redux.instruments.hawc.stepmoparent.StepMOParent" title="sofia_redux.instruments.hawc.stepmoparent.StepMOParent"><code class="xref py py-class docutils literal notranslate"><span class="pre">StepMOParent</span></code></a></p>
<p>Reconstruct an image from scanning polarimetry data.</p>
<p>This step requires that scanning polarimetry data are taken with
four HWP angles, one per input file. Sets of data are identified
by the SCRIPTID keyword, and are passed to the scan map algorithm
one group at a  time. R0 and T0 output maps are created for each
input file to.  This step assembles them into a single file with
R0 and T0 extensions (DATA, ERROR, and EXPOSURE) for each HWP angle.
One output file is produced for each set of 4 HWP angles.</p>
<p class="rubric">Methods Summary</p>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#sofia_redux.instruments.hawc.steps.stepscanmappol.StepScanMapPol.assemble_scanpol" title="sofia_redux.instruments.hawc.steps.stepscanmappol.StepScanMapPol.assemble_scanpol"><code class="xref py py-obj docutils literal notranslate"><span class="pre">assemble_scanpol</span></code></a>(dataout, basehead)</p></td>
<td><p>Assemble scan maps into a single file.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#sofia_redux.instruments.hawc.steps.stepscanmappol.StepScanMapPol.run" title="sofia_redux.instruments.hawc.steps.stepscanmappol.StepScanMapPol.run"><code class="xref py py-obj docutils literal notranslate"><span class="pre">run</span></code></a>()</p></td>
<td><p>Run the data reduction algorithm.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#sofia_redux.instruments.hawc.steps.stepscanmappol.StepScanMapPol.setup" title="sofia_redux.instruments.hawc.steps.stepscanmappol.StepScanMapPol.setup"><code class="xref py py-obj docutils literal notranslate"><span class="pre">setup</span></code></a>()</p></td>
<td><p>Set parameters and metadata for the pipeline step.</p></td>
</tr>
</tbody>
</table>
<p class="rubric">Methods Documentation</p>
<dl class="py method">
<dt class="sig sig-object py" id="sofia_redux.instruments.hawc.steps.stepscanmappol.StepScanMapPol.assemble_scanpol">
<span class="sig-name descname"><span class="pre">assemble_scanpol</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataout</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">basehead</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sofia_redux/instruments/hawc/steps/stepscanmappol.html#StepScanMapPol.assemble_scanpol"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sofia_redux.instruments.hawc.steps.stepscanmappol.StepScanMapPol.assemble_scanpol" title="Permalink to this definition">¶</a></dt>
<dd><p>Assemble scan maps into a single file.</p>
<p>HWP angles are determined from the HWPINIT key in the output
file headers. If 4 unique angles with two subarray images each
are not found, an error is raised.</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl>
<dt><strong>dataout</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">list</span></code></a> of DataFits</span></dt><dd><p>Output scan maps to assemble.</p>
</dd>
<dt><strong>basehead</strong><span class="classifier">fits.Header</span></dt><dd><p>Baseline header to update for output file.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>DataFits</dt><dd><p>The assembled data file.</p>
</dd>
</dl>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt>ValueError</dt><dd><p>If output is missing keywords HWPINIT, SUBARRAY, or TELVPA,
or if 4 unique HWP angles are not found, or if the wrong
number of subarray images are found (should be one R and one T).</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sofia_redux.instruments.hawc.steps.stepscanmappol.StepScanMapPol.run">
<span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sofia_redux/instruments/hawc/steps/stepscanmappol.html#StepScanMapPol.run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sofia_redux.instruments.hawc.steps.stepscanmappol.StepScanMapPol.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Run the data reduction algorithm.</p>
<p>This step is run as a multi-in multi-out (MIMO) step:
self.datain should be a list of DataFits, and output
will also be a list of DataFits, stored in self.dataout.</p>
<p>The process is:</p>
<ol class="arabic simple">
<li><p>Group input data by the header keyword SCRIPTID.</p></li>
<li><p>Assemble the scan map options from input parameters.</p></li>
<li><p>Call the iterative scan map reconstructor. Internally,
the process will run multiple times, with appropriate arguments
for each HWP angle. It will create multiple output maps:
one for each of the R0 and T0 subarrays at each HWP angle.
For the standard four-angle case, 8 maps are created.</p></li>
<li><p>Assemble the output maps into a single output file per
group, with a separate extension for flux, error, and
exposure at each HWP angle and subarray.</p></li>
<li><p>Merge header keywords from the input FITS files to generate
an appropriate output header for each output file.</p></li>
</ol>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sofia_redux.instruments.hawc.steps.stepscanmappol.StepScanMapPol.setup">
<span class="sig-name descname"><span class="pre">setup</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sofia_redux/instruments/hawc/steps/stepscanmappol.html#StepScanMapPol.setup"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sofia_redux.instruments.hawc.steps.stepscanmappol.StepScanMapPol.setup" title="Permalink to this definition">¶</a></dt>
<dd><p>Set parameters and metadata for the pipeline step.</p>
<p>Output files have PRODTYPE = ‘scanmappol’, and are named with
the step abbreviation ‘SMP’.</p>
<p>Parameters defined for this step are:</p>
<dl class="simple">
<dt>vpa_tol<span class="classifier">float</span></dt><dd><p>If differences between telescope angles (VPA) are more
than this value, this step will issue a warning.</p>
</dd>
<dt>use_frames<span class="classifier">str</span></dt><dd><p>Frames to use from the reduction. Specify a particular
range, as ‘400:-400’, or ‘400:1000’.</p>
</dd>
<dt>grid<span class="classifier">float</span></dt><dd><p>Output pixel scale.  If not set, default values from scan map
configuration will be used.</p>
</dd>
<dt>deep<span class="classifier">bool</span></dt><dd><p>If set, faint point-like emission is prioritized.</p>
</dd>
<dt>faint<span class="classifier">bool</span></dt><dd><p>If set, faint emission (point-like or extended) is prioritized.</p>
</dd>
<dt>extended<span class="classifier">bool</span></dt><dd><p>If set, extended emission is prioritized.
This may increase noise on large angular scales.</p>
</dd>
<dt>options<span class="classifier">str</span></dt><dd><p>Additional options to pass to the scan map algorithm.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><h3>Page Contents</h3>
<ul>
<li><a class="reference internal" href="#">StepScanMapPol</a><ul>
<li><a class="reference internal" href="#sofia_redux.instruments.hawc.steps.stepscanmappol.StepScanMapPol"><code class="docutils literal notranslate"><span class="pre">StepScanMapPol</span></code></a><ul>
<li><a class="reference internal" href="#sofia_redux.instruments.hawc.steps.stepscanmappol.StepScanMapPol.assemble_scanpol"><code class="docutils literal notranslate"><span class="pre">StepScanMapPol.assemble_scanpol()</span></code></a></li>
<li><a class="reference internal" href="#sofia_redux.instruments.hawc.steps.stepscanmappol.StepScanMapPol.run"><code class="docutils literal notranslate"><span class="pre">StepScanMapPol.run()</span></code></a></li>
<li><a class="reference internal" href="#sofia_redux.instruments.hawc.steps.stepscanmappol.StepScanMapPol.setup"><code class="docutils literal notranslate"><span class="pre">StepScanMapPol.setup()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>


        </div>
      </div>
      <div class="clearer"></div>
    </div>
<footer class="footer">
  <p class="pull-right">
    <a href="../_sources/api/sofia_redux.instruments.hawc.steps.stepscanmappol.StepScanMapPol.rst.txt"
       rel="nofollow">Page Source</a> &nbsp;
    <a href="#">Back to Top</a></p>
  <p>
    &copy; Copyright 2023, SOFIA-USRA.<br/>
    Created using <a href="http://www.sphinx-doc.org/en/stable/">Sphinx</a> 7.1.2. &nbsp;
    Last built 13 Aug 2023. <br/>
  </p>
</footer>
  </body>
</html>