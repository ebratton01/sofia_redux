<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>get_pinpos &#8212; sofia_redux v1.3.4.dev0</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sofia.css?v=3fe2c07e" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=eafc0fe6" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    
    <script src="../_static/jquery.js?v=5d32c60e"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js?v=602f4d50"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=4825356b"></script>
    <script type="text/javascript" src="../_static/sidebar.js"></script>
    <script type="text/javascript" src="../_static/copybutton.js"></script>
    <link rel="icon" href="../_static/redux.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="find_pixat11" href="sofia_redux.instruments.forcast.undistort.find_pixat11.html" />
    <link rel="prev" title="default_pinpos" href="sofia_redux.instruments.forcast.undistort.default_pinpos.html" />
    <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,600' rel='stylesheet' type='text/css'/>

  </head><body>
<div class="topbar">
  <a class="brand" title="Documentation Home" href="../index.html"><span id="logotext1">SOFIA</span><span id="logotext2">Redux</span><span id="logotext3">:docs</span></a>
  <ul>
    <li><a class="homelink" title="SOFIA Homepage" href="https://www.sofia.usra.edu/"></a></li>
    <li><a title="General Index" href="../genindex.html">Index</a></li>
    <li><a title="Module Index" href="../py-modindex.html">Modules</a></li>
    <li>
      
      
<form action="../search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
      
    </li>
  </ul>
</div>

<div class="related">
    <h3>Navigation</h3>
    <ul>
      <li class="right">
	<a href="sofia_redux.instruments.forcast.undistort.find_pixat11.html" title="find_pixat11">
	  next &raquo;
	</a>
      </li>
      <li class="right">
	<a href="sofia_redux.instruments.forcast.undistort.default_pinpos.html" title="default_pinpos">
	  &laquo; previous
	</a>
	 |
      </li>
      <li>
	<a href="../index.html">sofia_redux v1.3.4.dev0</a>
	 &#187;
      </li>
      <li><a href="../sofia_redux/index.html" >SOFIA Redux</a> &#187;</li>
      <li><a href="../manuals/forcast/developers/developers.html" accesskey="U">FORCAST Redux Developer’s Manual</a> &#187;</li>
      
      <li>get_pinpos</li> 
    </ul>
</div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="get-pinpos">
<h1>get_pinpos<a class="headerlink" href="#get-pinpos" title="Permalink to this heading">¶</a></h1>
<dl class="py function">
<dt class="sig sig-object py" id="sofia_redux.instruments.forcast.undistort.get_pinpos">
<span class="sig-prename descclassname"><span class="pre">sofia_redux.instruments.forcast.undistort.</span></span><span class="sig-name descname"><span class="pre">get_pinpos</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">header</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pinpos</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rotate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sofia_redux/instruments/forcast/undistort.html#get_pinpos"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sofia_redux.instruments.forcast.undistort.get_pinpos" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the pinhole model and coefficients and update header.</p>
<p>The majority of this code sanity checks pin positions and
model positions.  If the user has not supplied the pinpos
dict, one will be retrieved from the drip configuration or
from a default set defined in this file (not recommended).
Note that if the header contains the PIN_MOD keyword it
will override ‘dx’, ‘dy’, ‘angle’, and ‘order’ from any
other source.</p>
<p>The user may optionally rotate the image by NODANGLE in the
header.  If the angle is non-zero, the model will be
rotated around the center of the image and be rescaled by a
factor of two.  Note that we are not interested in scaling
or offsets at this point as only the relative warping
between points is important.  Offsets and scalings will be
determined during the WCS correction and re-binning steps.</p>
<p>The PIN_MOD keyword in the header will be updated to contain
values as a string in the format ‘[dx,dy,angle,order]’ where
all values are described under the pinpos parameter.</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl>
<dt><strong>header</strong><span class="classifier">astropy.io.fits.header.Header</span></dt><dd><p>FITS header that will may be used to determine pinhole model
coefficients or will be updated with them</p>
</dd>
<dt><strong>pinpos</strong><span class="classifier">dict or str or None</span></dt><dd><p>if pinpos == ‘default’ then the output pin positions will
be retried from default_pinpos(). If pinpos is None, the pin
positions will be retrieved according to the drip
configuration.  Otherwise, the user should explicitly define
pinpos as a dict with the following keys and values:</p>
<blockquote>
<div><dl class="simple">
<dt>model -&gt; numpy.ndarray</dt><dd><p>N(x, y) model reference positions of shape (N, 2)</p>
</dd>
<dt>pins -&gt; numpy.ndarray</dt><dd><p>N(x, y) pin positions of shape (N, 2)</p>
</dd>
<dt>nx, ny -&gt; int</dt><dd><p>define number of pixels for both pins and image in x and y</p>
</dd>
<dt>dx, dy -&gt; float</dt><dd><p>model x, y spacing</p>
</dd>
<dt>angle -&gt; float</dt><dd><p>clockwise rotation of the model about the center in
degrees.  This is not required for anything but the
PIN_MID keyword in the header will be updated with
this value.</p>
</dd>
<dt>order -&gt; int</dt><dd><p>order to be used if using the “polynomial” method in
sofia_redux.instruments.forcast.undistort based upon
this model.</p>
</dd>
</dl>
</div></blockquote>
</dd>
<dt><strong>rotate</strong><span class="classifier">bool, optional</span></dt><dd><p>rotate the model by ‘NODANGLE’ in the header</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>dict or None</dt><dd><p>pinpos if validated else None.  If rotation occurred then
pinpos[‘model’] will be updated.  Keys and values are
described above under the <code class="xref py py-obj docutils literal notranslate"><span class="pre">pinpos</span></code> parameter.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><h3>Page Contents</h3>
<ul>
<li><a class="reference internal" href="#">get_pinpos</a><ul>
<li><a class="reference internal" href="#sofia_redux.instruments.forcast.undistort.get_pinpos"><code class="docutils literal notranslate"><span class="pre">get_pinpos()</span></code></a></li>
</ul>
</li>
</ul>


        </div>
      </div>
      <div class="clearer"></div>
    </div>
<footer class="footer">
  <p class="pull-right">
    <a href="../_sources/api/sofia_redux.instruments.forcast.undistort.get_pinpos.rst.txt"
       rel="nofollow">Page Source</a> &nbsp;
    <a href="#">Back to Top</a></p>
  <p>
    &copy; Copyright 2023, SOFIA-USRA.<br/>
    Created using <a href="http://www.sphinx-doc.org/en/stable/">Sphinx</a> 7.1.2. &nbsp;
    Last built 13 Aug 2023. <br/>
  </p>
</footer>
  </body>
</html>