<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>map_coordinates &#8212; sofia_redux v1.3.4.dev0</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sofia.css?v=3fe2c07e" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=eafc0fe6" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    
    <script src="../_static/jquery.js?v=5d32c60e"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js?v=602f4d50"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=4825356b"></script>
    <script type="text/javascript" src="../_static/sidebar.js"></script>
    <script type="text/javascript" src="../_static/copybutton.js"></script>
    <link rel="icon" href="../_static/redux.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="warp_image" href="sofia_redux.toolkit.image.warp.warp_image.html" />
    <link rel="prev" title="clip_output" href="sofia_redux.toolkit.image.utilities.clip_output.html" />
    <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,600' rel='stylesheet' type='text/css'/>

  </head><body>
<div class="topbar">
  <a class="brand" title="Documentation Home" href="../index.html"><span id="logotext1">SOFIA</span><span id="logotext2">Redux</span><span id="logotext3">:docs</span></a>
  <ul>
    <li><a class="homelink" title="SOFIA Homepage" href="https://www.sofia.usra.edu/"></a></li>
    <li><a title="General Index" href="../genindex.html">Index</a></li>
    <li><a title="Module Index" href="../py-modindex.html">Modules</a></li>
    <li>
      
      
<form action="../search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
      
    </li>
  </ul>
</div>

<div class="related">
    <h3>Navigation</h3>
    <ul>
      <li class="right">
	<a href="sofia_redux.toolkit.image.warp.warp_image.html" title="warp_image">
	  next &raquo;
	</a>
      </li>
      <li class="right">
	<a href="sofia_redux.toolkit.image.utilities.clip_output.html" title="clip_output">
	  &laquo; previous
	</a>
	 |
      </li>
      <li>
	<a href="../index.html">sofia_redux v1.3.4.dev0</a>
	 &#187;
      </li>
      <li><a href="../sofia_redux/index.html" >SOFIA Redux</a> &#187;</li>
      <li><a href="../manuals/exes/developers/developers.html" accesskey="U">EXES Redux Developer’s Manual</a> &#187;</li>
      
      <li>map_coordinates</li> 
    </ul>
</div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="map-coordinates">
<h1>map_coordinates<a class="headerlink" href="#map-coordinates" title="Permalink to this heading">¶</a></h1>
<dl class="py function">
<dt class="sig sig-object py" id="sofia_redux.toolkit.image.utilities.map_coordinates">
<span class="sig-prename descclassname"><span class="pre">sofia_redux.toolkit.image.utilities.</span></span><span class="sig-name descname"><span class="pre">map_coordinates</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">coordinates</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">order</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'constant'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cval</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">nan</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">clip</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.5</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sofia_redux/toolkit/image/utilities.html#map_coordinates"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sofia_redux.toolkit.image.utilities.map_coordinates" title="Permalink to this definition">¶</a></dt>
<dd><p>A drop in replacement for <code class="xref py py-func docutils literal notranslate"><span class="pre">ndimage.map_coordinates()</span></code>.</p>
<p>This function has been modified to handle NaN <code class="xref py py-obj docutils literal notranslate"><span class="pre">cval</span></code> values with the
‘constant’ <code class="xref py py-obj docutils literal notranslate"><span class="pre">mode</span></code>.  The original method results in inconsistent results
and occasionally fills the output with all NaN values.</p>
<p>The array of coordinates is used to find, for each point in the output,
the corresponding coordinates in the input. The value of the input at
those coordinates is determined by spline interpolation of the
requested order.</p>
<p>The shape of the output is derived from that of the coordinate
array by dropping the first axis. The values of the array along
the first axis are the coordinates in the input array at which the
output value is found.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>data</strong><span class="classifier">numpy.ndarray</span></dt><dd><p>The data array to map with n_dimensions dimensions with a size of N.</p>
</dd>
<dt><strong>coordinates</strong><span class="classifier">numpy.ndarray</span></dt><dd><p>The coordinates at which <code class="xref py py-obj docutils literal notranslate"><span class="pre">data</span></code> is evaluated.  Must be of shape
(n_dimensions, N) or (n_dimensions, shape,) where product(shape) = N.
Dimensions are ordered using the Numpy (y, x) convention.</p>
</dd>
<dt><strong>order</strong><span class="classifier">int, optional</span></dt><dd><p>The order of the spline interpolation.  Must be in the range 0-5.</p>
</dd>
<dt><strong>mode</strong><span class="classifier">str, optional</span></dt><dd><p>Can take values of {‘constant’, ‘edge’, ‘symmetric’, ‘reflect’, ‘wrap’}
for which points outside the boundaries of the input are filled
according to the given mode.  Modes match the behaviour of
<code class="xref py py-func docutils literal notranslate"><span class="pre">np.pad()</span></code>.</p>
</dd>
<dt><strong>cval</strong><span class="classifier">float, optional</span></dt><dd><p>Used in conjunction with mode ‘constant’, the value outside
the image boundaries.</p>
</dd>
<dt><strong>output</strong><span class="classifier">numpy.ndarray, optional</span></dt><dd><p>The output array to fill with the results.  Should generally be the
same shape as <code class="xref py py-obj docutils literal notranslate"><span class="pre">data</span></code>.</p>
</dd>
<dt><strong>clip</strong><span class="classifier">bool, optional</span></dt><dd><p>Whether to clip the output to the range of values of the input image.
This is enabled by default, since higher order interpolation may
produce values outside the given input range.</p>
</dd>
<dt><strong>threshold</strong><span class="classifier">float, optional</span></dt><dd><p>Used in conjunction with <code class="xref py py-obj docutils literal notranslate"><span class="pre">cval`=NaN</span> <span class="pre">and</span> <span class="pre">`mode`='constant'.</span>&#160; <span class="pre">Should</span>
<span class="pre">generally</span> <span class="pre">take</span> <span class="pre">values</span> <span class="pre">in</span> <span class="pre">the</span> <span class="pre">range</span> <span class="pre">-1</span> <span class="pre">to</span> <span class="pre">1</span> <span class="pre">with</span> <span class="pre">a</span> <span class="pre">default</span> <span class="pre">of</span> <span class="pre">0.5.</span>
<span class="pre">This</span> <span class="pre">is</span> <span class="pre">used</span> <span class="pre">to</span> <span class="pre">better</span> <span class="pre">apply</span> <span class="pre">NaN</span> <span class="pre">`cval</span></code> boundaries as expected.  Points
inside the boundaries are mapped to 1, and values outside are mapped to
-1.  Points which map to values &gt;= <code class="xref py py-obj docutils literal notranslate"><span class="pre">threshold</span></code> are considered valid,
while others will be set to NaN in the output.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>mapped_coordinates</strong><span class="classifier">numpy.ndarray</span></dt><dd><p>The result of transforming the data. The shape of the output is
derived from that of <code class="xref py py-obj docutils literal notranslate"><span class="pre">coordinates</span></code> by dropping the first axis, or
via <code class="xref py py-obj docutils literal notranslate"><span class="pre">output</span></code>.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><h3>Page Contents</h3>
<ul>
<li><a class="reference internal" href="#">map_coordinates</a><ul>
<li><a class="reference internal" href="#sofia_redux.toolkit.image.utilities.map_coordinates"><code class="docutils literal notranslate"><span class="pre">map_coordinates()</span></code></a></li>
</ul>
</li>
</ul>


        </div>
      </div>
      <div class="clearer"></div>
    </div>
<footer class="footer">
  <p class="pull-right">
    <a href="../_sources/api/sofia_redux.toolkit.image.utilities.map_coordinates.rst.txt"
       rel="nofollow">Page Source</a> &nbsp;
    <a href="#">Back to Top</a></p>
  <p>
    &copy; Copyright 2023, SOFIA-USRA.<br/>
    Created using <a href="http://www.sphinx-doc.org/en/stable/">Sphinx</a> 7.1.2. &nbsp;
    Last built 13 Aug 2023. <br/>
  </p>
</footer>
  </body>
</html>