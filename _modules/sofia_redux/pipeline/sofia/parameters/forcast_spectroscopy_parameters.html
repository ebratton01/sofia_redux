<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>sofia_redux.pipeline.sofia.parameters.forcast_spectroscopy_parameters &#8212; sofia_redux v1.3.4.dev0</title>
    <link rel="stylesheet" type="text/css" href="../../../../../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../../../../../_static/bootstrap-sofia.css?v=3fe2c07e" />
    <link rel="stylesheet" type="text/css" href="../../../../../_static/graphviz.css?v=eafc0fe6" />
    <link rel="stylesheet" type="text/css" href="../../../../../_static/plot_directive.css" />
    
    <script src="../../../../../_static/jquery.js?v=5d32c60e"></script>
    <script src="../../../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
    <script data-url_root="../../../../../" id="documentation_options" src="../../../../../_static/documentation_options.js?v=602f4d50"></script>
    <script src="../../../../../_static/doctools.js?v=888ff710"></script>
    <script src="../../../../../_static/sphinx_highlight.js?v=4825356b"></script>
    <script type="text/javascript" src="../../../../../_static/sidebar.js"></script>
    <script type="text/javascript" src="../../../../../_static/copybutton.js"></script>
    <link rel="icon" href="../../../../../_static/redux.ico"/>
    <link rel="index" title="Index" href="../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../search.html" />
    <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,600' rel='stylesheet' type='text/css'/>

  </head><body>
<div class="topbar">
  <a class="brand" title="Documentation Home" href="../../../../../index.html"><span id="logotext1">SOFIA</span><span id="logotext2">Redux</span><span id="logotext3">:docs</span></a>
  <ul>
    <li><a class="homelink" title="SOFIA Homepage" href="https://www.sofia.usra.edu/"></a></li>
    <li><a title="General Index" href="../../../../../genindex.html">Index</a></li>
    <li><a title="Module Index" href="../../../../../py-modindex.html">Modules</a></li>
    <li>
      
      
<form action="../../../../../search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
      
    </li>
  </ul>
</div>

<div class="related">
    <h3>Navigation</h3>
    <ul>
      <li>
	<a href="../../../../../index.html">sofia_redux v1.3.4.dev0</a>
	 &#187;
      </li>
      <li><a href="../../../../index.html" accesskey="U">Module code</a> &#187;</li>
      
       
    </ul>
</div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for sofia_redux.pipeline.sofia.parameters.forcast_spectroscopy_parameters</h1><div class="highlight"><pre>
<span></span># Licensed under a 3-clause BSD style license - see LICENSE.rst
&quot;&quot;&quot;FORCAST parameter sets.&quot;&quot;&quot;

from sofia_redux.pipeline.sofia.parameters.forcast_parameters import \
    FORCASTParameters, DEFAULT

__all__ = [&#39;FORCASTSpectroscopyParameters&#39;]


SPECTRAL_DEFAULT = {
    &#39;stack_dithers&#39;: [
        {&#39;key&#39;: &#39;save&#39;,
         &#39;name&#39;: &#39;Save output&#39;,
         &#39;value&#39;: True,
         &#39;description&#39;: &#39;Save output data to disk&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;skip_stack&#39;,
         &#39;name&#39;: &#39;Skip dither stacking&#39;,
         &#39;value&#39;: True,
         &#39;description&#39;: &#39;Set to skip stacking input files &#39;
                        &#39;and propagate separate images instead.&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;ignore_dither&#39;,
         &#39;name&#39;: &#39;Ignore dither information from header&#39;,
         &#39;value&#39;: False,
         &#39;description&#39;: &#39;Set to ignore dither information and &#39;
                        &#39;stack all input.&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;method&#39;,
         &#39;name&#39;: &#39;Combination method&#39;,
         &#39;wtype&#39;: &#39;combo_box&#39;,
         &#39;options&#39;: [&#39;mean&#39;, &#39;median&#39;, &#39;sum&#39;],
         &#39;option_index&#39;: 0,
         &#39;description&#39;: &#39;Select the combination method.&#39;},
        {&#39;key&#39;: &#39;weighted&#39;,
         &#39;name&#39;: &#39;Use weighted mean&#39;,
         &#39;value&#39;: True,
         &#39;description&#39;: &#39;If set, the average of the data will be &#39;
                        &#39;weighted by the variance.\n&#39;
                        &#39;Ignored for method=median.&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;robust&#39;,
         &#39;name&#39;: &#39;Robust combination&#39;,
         &#39;value&#39;: True,
         &#39;description&#39;: &#39;If set, data will be sigma-clipped &#39;
                        &#39;before combination&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;threshold&#39;,
         &#39;name&#39;: &#39;Outlier rejection threshold (sigma)&#39;,
         &#39;value&#39;: 8.0,
         &#39;description&#39;: &#39;Specify the number of sigma to use in &#39;
                        &#39;sigma clip for robust algorithms.&#39;,
         &#39;dtype&#39;: &#39;float&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
        {&#39;key&#39;: &#39;maxiters&#39;,
         &#39;name&#39;: &#39;Maximum sigma-clipping iterations&#39;,
         &#39;value&#39;: 5,
         &#39;description&#39;: &#39;Specify the maximum number of outlier &#39;
                        &#39;rejection iterations to use if robust=True.&#39;,
         &#39;dtype&#39;: &#39;int&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
    ],
    &#39;make_profiles&#39;: [
        {&#39;key&#39;: &#39;save&#39;,
         &#39;name&#39;: &#39;Save output&#39;,
         &#39;value&#39;: True,
         &#39;description&#39;: &#39;Save output data to disk&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;wavefile&#39;,
         &#39;name&#39;: &#39;Wave/space calibration file&#39;,
         &#39;value&#39;: &#39;&#39;,
         &#39;description&#39;: &#39;FITS file containing coordinate calibration data&#39;,
         &#39;dtype&#39;: &#39;str&#39;,
         &#39;wtype&#39;: &#39;pick_file&#39;},
        {&#39;key&#39;: &#39;slitfile&#39;,
         &#39;name&#39;: &#39;Slit correction file&#39;,
         &#39;value&#39;: &#39;&#39;,
         &#39;description&#39;: &#39;FITS file containing slit correction data&#39;,
         &#39;dtype&#39;: &#39;str&#39;,
         &#39;wtype&#39;: &#39;pick_file&#39;},
        {&#39;key&#39;: &#39;fit_order&#39;,
         &#39;name&#39;: &#39;Row fit order&#39;,
         &#39;value&#39;: 3,
         &#39;description&#39;: &#39;Polynomial fit order for rows &#39;
                        &#39;(along spectral dimension).&#39;,
         &#39;dtype&#39;: &#39;int&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
        {&#39;key&#39;: &#39;bg_sub&#39;,
         &#39;name&#39;: &#39;Subtract median background&#39;,
         &#39;value&#39;: True,
         &#39;description&#39;: &#39;If set, the median value along columns will &#39;
                        &#39;be subtracted from the profile.&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;atmosthresh&#39;,
         &#39;name&#39;: &#39;Atmospheric transmission threshold&#39;,
         &#39;value&#39;: 0.0,
         &#39;description&#39;: &#39;Transmission values below this threshold are not &#39;
                        &#39;considered when making the spatial profile.\n&#39;
                        &#39;Values are 0-1.&#39;,
         &#39;dtype&#39;: &#39;float&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
        {&#39;key&#39;: &#39;simwavecal&#39;,
         &#39;name&#39;: &#39;Simulate calibrations&#39;,
         &#39;value&#39;: False,
         &#39;description&#39;: &#39;If set, the data will not be rectified or &#39;
                        &#39;calibrated.&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;testwavecal&#39;,
         &#39;hidden&#39;: True,
         &#39;name&#39;: &#39;Test new calibrations&#39;,
         &#39;value&#39;: False,
         &#39;description&#39;: &#39;If set, WAVECAL and SPATCAL extensions will be used &#39;
                        &#39;for rectification.&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
    ],
    &#39;locate_apertures&#39;: [
        {&#39;key&#39;: &#39;save&#39;,
         &#39;name&#39;: &#39;Save output&#39;,
         &#39;value&#39;: False,
         &#39;description&#39;: &#39;Save output data to disk&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;method&#39;,
         &#39;name&#39;: &#39;Aperture location method&#39;,
         &#39;wtype&#39;: &#39;combo_box&#39;,
         &#39;options&#39;: [&#39;auto&#39;, &#39;fix to input&#39;, &#39;fix to center&#39;],
         &#39;option_index&#39;: 0,
         &#39;description&#39;: &#39;Select the aperture location method.&#39;},
        {&#39;key&#39;: &#39;num_aps&#39;,
         &#39;name&#39;: &#39;Number of auto apertures&#39;,
         &#39;value&#39;: 1,
         &#39;description&#39;: &#39;Number of apertures to look for &#39;
                        &#39;if aperture is not fixed&#39;,
         &#39;dtype&#39;: &#39;int&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
        {&#39;key&#39;: &#39;input_position&#39;,
         &#39;name&#39;: &#39;Aperture position&#39;,
         &#39;value&#39;: &#39;&#39;,
         &#39;description&#39;: &#39;Starting position(s) for aperture detection, &#39;
                        &#39;comma-separated for apertures, semi-colon &#39;
                        &#39;separated for files.\n&#39;
                        &#39;If method is &quot;fix to input&quot;, will be used &#39;
                        &#39;directly.&#39;,
         &#39;dtype&#39;: &#39;str&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
        {&#39;key&#39;: &#39;fwhm&#39;,
         &#39;name&#39;: &#39;Expected aperture FWHM (arcsec)&#39;,
         &#39;value&#39;: 3.0,
         &#39;description&#39;: &#39;Gaussian FWHM estimate for fit to profile.&#39;,
         &#39;dtype&#39;: &#39;float&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
    ],
    &#39;trace_continuum&#39;: [
        {&#39;key&#39;: &#39;save&#39;,
         &#39;name&#39;: &#39;Save output&#39;,
         &#39;value&#39;: False,
         &#39;description&#39;: &#39;Save output data to disk&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;attach_trace_xy&#39;,
         &#39;name&#39;: &#39;Attach trace positions table&#39;,
         &#39;hidden&#39;: True,
         &#39;value&#39;: False,
         &#39;description&#39;: &#39;If set, trace x/y positions will be attached\n&#39;
                        &#39;in an additional extension.&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;method&#39;,
         &#39;name&#39;: &#39;Trace method&#39;,
         &#39;wtype&#39;: &#39;combo_box&#39;,
         &#39;options&#39;: [&#39;fix to aperture position&#39;, &#39;fit to continuum&#39;],
         &#39;option_index&#39;: 1,
         &#39;description&#39;: &#39;Select the trace method.&#39;},
        {&#39;key&#39;: &#39;fit_order&#39;,
         &#39;name&#39;: &#39;Trace fit order&#39;,
         &#39;value&#39;: 2,
         &#39;description&#39;: &#39;Polynomial fit order for aperture center &#39;
                        &#39;(along spectral dimension).&#39;,
         &#39;dtype&#39;: &#39;int&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
        {&#39;key&#39;: &#39;fit_thresh&#39;,
         &#39;name&#39;: &#39;Trace fit threshold&#39;,
         &#39;value&#39;: 4.0,
         &#39;description&#39;: &#39;Robust rejection threshold, in sigma.&#39;,
         &#39;dtype&#39;: &#39;float&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
        {&#39;key&#39;: &#39;step_size&#39;,
         &#39;name&#39;: &#39;Fit position step size (pixels)&#39;,
         &#39;value&#39;: 3,
         &#39;description&#39;: &#39;Step size along trace for fitting locations.&#39;,
         &#39;dtype&#39;: &#39;int&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
    ],
    &#39;set_apertures&#39;: [
        {&#39;key&#39;: &#39;save&#39;,
         &#39;name&#39;: &#39;Save output&#39;,
         &#39;value&#39;: False,
         &#39;description&#39;: &#39;Save output data to disk&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;full_slit&#39;,
         &#39;name&#39;: &#39;Extract the full slit&#39;,
         &#39;value&#39;: False,
         &#39;description&#39;: &#39;If set, all other parameters will be ignored.&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;refit&#39;,
         &#39;name&#39;: &#39;Refit apertures for FWHM&#39;,
         &#39;value&#39;: True,
         &#39;description&#39;: &#39;If set, the peak position will be fit &#39;
                        &#39;with a Gaussian to determine the aperture &#39;
                        &#39;radii.  If not, the assumed value will &#39;
                        &#39;be used.&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;apsign&#39;,
         &#39;name&#39;: &#39;Aperture sign&#39;,
         &#39;value&#39;: &#39;&#39;,
         &#39;description&#39;: &#39;If specified, will be used directly. Separate &#39;
                        &#39;files with semi-colon, apertures with comma.&#39;,
         &#39;dtype&#39;: &#39;str&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
        {&#39;key&#39;: &#39;aprad&#39;,
         &#39;name&#39;: &#39;Aperture radius&#39;,
         &#39;value&#39;: &#39;&#39;,
         &#39;description&#39;: &#39;If specified, will be used directly. Separate &#39;
                        &#39;files with semi-colon, apertures with comma.&#39;,
         &#39;dtype&#39;: &#39;str&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
        {&#39;key&#39;: &#39;psfrad&#39;,
         &#39;name&#39;: &#39;PSF radius&#39;,
         &#39;value&#39;: &#39;&#39;,
         &#39;description&#39;: &#39;If specified, will be used directly. Separate &#39;
                        &#39;files with semi-colon, apertures with comma.&#39;,
         &#39;dtype&#39;: &#39;str&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
        {&#39;key&#39;: &#39;bgr&#39;,
         &#39;name&#39;: &#39;Background regions&#39;,
         &#39;value&#39;: &#39;&#39;,
         &#39;description&#39;: &#39;If specified, will be used directly. Separate &#39;
                        &#39;files with semi-colon, regions with comma, &#39;
                        &#39;start and stop with dash.&#39;,
         &#39;dtype&#39;: &#39;str&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
    ],
    &#39;subtract_background&#39;: [
        {&#39;key&#39;: &#39;save&#39;,
         &#39;name&#39;: &#39;Save output&#39;,
         &#39;value&#39;: False,
         &#39;description&#39;: &#39;Save output data to disk&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;skip_bg&#39;,
         &#39;name&#39;: &#39;Skip background subtraction&#39;,
         &#39;value&#39;: False,
         &#39;description&#39;: &#39;Set to skip subtracting background.&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;bg_fit_order&#39;,
         &#39;name&#39;: &#39;Background fit order&#39;,
         &#39;value&#39;: 0,
         &#39;description&#39;: &#39;Polynomial fit order for background level.&#39;,
         &#39;dtype&#39;: &#39;int&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
    ],
    &#39;extract_spectra&#39;: [
        {&#39;key&#39;: &#39;save&#39;,
         &#39;name&#39;: &#39;Save output&#39;,
         &#39;value&#39;: False,
         &#39;description&#39;: &#39;Save output data to disk&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;save_1d&#39;,
         &#39;name&#39;: &#39;Save extracted 1D spectra&#39;,
         &#39;value&#39;: False,
         &#39;description&#39;: &#39;Save spectra to disk&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;method&#39;,
         &#39;name&#39;: &#39;Extraction method&#39;,
         &#39;wtype&#39;: &#39;combo_box&#39;,
         &#39;options&#39;: [&#39;optimal&#39;, &#39;standard&#39;],
         &#39;option_index&#39;: 0,
         &#39;description&#39;: &#39;Select the extraction method.&#39;},
        {&#39;key&#39;: &#39;use_profile&#39;,
         &#39;name&#39;: &#39;Use median profile instead of spatial map&#39;,
         &#39;value&#39;: False,
         &#39;description&#39;: &#39;If true, the same profile will be used to &#39;
                        &#39;scale all wavelengths.&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;fix_bad&#39;,
         &#39;name&#39;: &#39;Use spatial profile to fix bad pixels&#39;,
         &#39;value&#39;: True,
         &#39;description&#39;: &#39;Ignored for optimal extraction.&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;threshold&#39;,
         &#39;name&#39;: &#39;Bad pixel threshold (sigma)&#39;,
         &#39;value&#39;: 10.0,
         &#39;description&#39;: &#39;Specify the number of sigma to use in &#39;
                        &#39;sigma clip for robust algorithms.&#39;,
         &#39;dtype&#39;: &#39;float&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
    ],
    &#39;merge_apertures&#39;: [
        {&#39;key&#39;: &#39;save&#39;,
         &#39;name&#39;: &#39;Save output&#39;,
         &#39;value&#39;: True,
         &#39;description&#39;: &#39;Save output data to disk&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;save_1d&#39;,
         &#39;name&#39;: &#39;Save uncalibrated 1D spectra&#39;,
         &#39;value&#39;: False,
         &#39;description&#39;: &#39;Save spectra to disk&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;method&#39;,
         &#39;name&#39;: &#39;Combination method&#39;,
         &#39;wtype&#39;: &#39;combo_box&#39;,
         &#39;options&#39;: [&#39;mean&#39;, &#39;median&#39;],
         &#39;option_index&#39;: 0,
         &#39;description&#39;: &#39;Select the combination method.&#39;},
        {&#39;key&#39;: &#39;weighted&#39;,
         &#39;name&#39;: &#39;Use weighted mean&#39;,
         &#39;value&#39;: True,
         &#39;description&#39;: &#39;If set, the average of the data will be &#39;
                        &#39;weighted by the variance. &#39;
                        &#39;Ignored for method=median.&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;}
    ],
    &#39;flux_calibrate&#39;: [
        {&#39;key&#39;: &#39;general_params&#39;,
         &#39;name&#39;: &#39;General Parameters&#39;,
         &#39;wtype&#39;: &#39;group&#39;},
        {&#39;key&#39;: &#39;save&#39;,
         &#39;name&#39;: &#39;Save output&#39;,
         &#39;value&#39;: True,
         &#39;description&#39;: &#39;Save output data to disk&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;save_1d&#39;,
         &#39;name&#39;: &#39;Save calibrated 1D spectra&#39;,
         &#39;value&#39;: False,
         &#39;description&#39;: &#39;Save spectra to disk&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;skip_cal&#39;,
         &#39;name&#39;: &#39;Skip flux calibration&#39;,
         &#39;value&#39;: False,
         &#39;description&#39;: &#39;Set to skip calibrating data.&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;making_response&#39;,
         &#39;name&#39;: &#39;Making response file&#39;,
         &#39;value&#39;: False,
         &#39;hidden&#39;: True,
         &#39;description&#39;: &#39;For use when calling flux_calibrate &#39;
                        &#39;for standards.&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;respfile&#39;,
         &#39;name&#39;: &#39;Response file&#39;,
         &#39;value&#39;: &#39;&#39;,
         &#39;description&#39;: &#39;FITS file containing instrument response data&#39;,
         &#39;dtype&#39;: &#39;str&#39;,
         &#39;wtype&#39;: &#39;pick_file&#39;},
        {&#39;key&#39;: &#39;resolution&#39;,
         &#39;name&#39;: &#39;Spectral resolution (l/dl)&#39;,
         &#39;value&#39;: -9999.,
         &#39;description&#39;: &#39;Specify the resolution of the mode.&#39;,
         &#39;dtype&#39;: &#39;float&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
        {&#39;key&#39;: &#39;atran_params&#39;,
         &#39;name&#39;: &#39;Telluric Correction Parameters&#39;,
         &#39;wtype&#39;: &#39;group&#39;},
        {&#39;key&#39;: &#39;optimize_atran&#39;,
         &#39;name&#39;: &#39;Optimize ATRAN correction&#39;,
         &#39;value&#39;: True,
         &#39;description&#39;: &#39;Set to determine optimal ATRAN correction from &#39;
                        &#39;spectral residuals.&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;atrandir&#39;,
         &#39;name&#39;: &#39;ATRAN directory&#39;,
         &#39;value&#39;: &#39;$DPS_SHARE/calibrations/ATRAN/fits&#39;,
         &#39;description&#39;: &#39;Directory containing ATRAN data.&#39;,
         &#39;dtype&#39;: &#39;str&#39;,
         &#39;wtype&#39;: &#39;pick_directory&#39;},
        {&#39;key&#39;: &#39;atranfile&#39;,
         &#39;name&#39;: &#39;ATRAN file&#39;,
         &#39;value&#39;: &#39;&#39;,
         &#39;description&#39;: &#39;FITS file containing atmospheric transmission data, &#39;
                        &#39;if not optimizing.&#39;,
         &#39;dtype&#39;: &#39;str&#39;,
         &#39;wtype&#39;: &#39;pick_file&#39;},
        {&#39;key&#39;: &#39;use_wv&#39;,
         &#39;name&#39;: &#39;Use WV values&#39;,
         &#39;value&#39;: False,
         &#39;description&#39;: &#39;If set, water vapor values from the header will &#39;
                        &#39;be used to choose the correct ATRAN file.&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;sn_threshold&#39;,
         &#39;name&#39;: &#39;S/N threshold for optimization&#39;,
         &#39;value&#39;: 10.0,
         &#39;description&#39;: &#39;Below this S/N value, optimization will &#39;
                        &#39;not be attempted.&#39;,
         &#39;dtype&#39;: &#39;float&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
        {&#39;key&#39;: &#39;waveshift_params&#39;,
         &#39;name&#39;: &#39;Wavelength Shift Parameters&#39;,
         &#39;wtype&#39;: &#39;group&#39;},
        {&#39;key&#39;: &#39;auto_shift&#39;,
         &#39;name&#39;: &#39;Auto-shift wavelength to telluric spectrum&#39;,
         &#39;value&#39;: True,
         &#39;description&#39;: &#39;Set to cross-correlate spectrum and telluric &#39;
                        &#39;spectrum to determine wavelength shift.&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;auto_shift_limit&#39;,
         &#39;name&#39;: &#39;Maximum auto wavelength shift to apply (pix)&#39;,
         &#39;value&#39;: 2.0,
         &#39;description&#39;: &#39;Higher calculated shifts will not be applied.&#39;,
         &#39;dtype&#39;: &#39;float&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
        {&#39;key&#39;: &#39;waveshift&#39;,
         &#39;name&#39;: &#39;Wavelength shift to apply (pix)&#39;,
         &#39;value&#39;: 0.0,
         &#39;description&#39;: &#39;Manually specify a wavelength shift correction.&#39;,
         &#39;dtype&#39;: &#39;float&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
        {&#39;key&#39;: &#39;model_order&#39;,
         &#39;name&#39;: &#39;Polynomial order for continuum&#39;,
         &#39;value&#39;: 1,
         &#39;description&#39;: &#39;Used in optimizing ATRAN and waveshift.&#39;,
         &#39;dtype&#39;: &#39;int&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
    ],
    &#39;combine_spectra&#39;: [
        {&#39;key&#39;: &#39;general_params&#39;,
         &#39;name&#39;: &#39;General Parameters&#39;,
         &#39;wtype&#39;: &#39;group&#39;},
        {&#39;key&#39;: &#39;save&#39;,
         &#39;name&#39;: &#39;Save output&#39;,
         &#39;value&#39;: True,
         &#39;description&#39;: &#39;Save output data to disk&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;registration&#39;,
         &#39;name&#39;: &#39;Registration method&#39;,
         &#39;wtype&#39;: &#39;combo_box&#39;,
         &#39;options&#39;: [&#39;Use WCS as is&#39;, &#39;Correct to target position&#39;,
                     &#39;Use header offsets&#39;],
         &#39;option_index&#39;: 1,
         &#39;description&#39;: &#39;Select the registration method.&#39;},
        {&#39;key&#39;: &#39;method&#39;,
         &#39;name&#39;: &#39;Combination method&#39;,
         &#39;wtype&#39;: &#39;combo_box&#39;,
         &#39;options&#39;: [&#39;mean&#39;, &#39;median&#39;, &#39;spectral cube&#39;],
         &#39;option_index&#39;: 0,
         &#39;description&#39;: &#39;Select the combination method.&#39;},
        {&#39;key&#39;: &#39;weighted&#39;,
         &#39;name&#39;: &#39;Weight by errors&#39;,
         &#39;value&#39;: True,
         &#39;description&#39;: &#39;If set, flux values are inversely weighted &#39;
                        &#39;by the error values before combination. &#39;
                        &#39;Ignored for method=median.&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;combination_params&#39;,
         &#39;name&#39;: &#39;1-2D Combination Parameters&#39;,
         &#39;wtype&#39;: &#39;group&#39;},
        {&#39;key&#39;: &#39;combine_aps&#39;,
         &#39;name&#39;: &#39;Combine apertures&#39;,
         &#39;hidden&#39;: True,
         &#39;value&#39;: False,
         &#39;description&#39;: &#39;If set, apertures will be combined.&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;robust&#39;,
         &#39;name&#39;: &#39;Robust combination&#39;,
         &#39;value&#39;: True,
         &#39;description&#39;: &#39;If set, data will be sigma-clipped &#39;
                        &#39;before combination&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;threshold&#39;,
         &#39;name&#39;: &#39;Outlier rejection threshold (sigma)&#39;,
         &#39;value&#39;: 8.0,
         &#39;description&#39;: &#39;Specify the number of sigma to use in &#39;
                        &#39;sigma clip for robust algorithms.&#39;,
         &#39;dtype&#39;: &#39;float&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
        {&#39;key&#39;: &#39;maxiters&#39;,
         &#39;name&#39;: &#39;Maximum sigma-clipping iterations&#39;,
         &#39;value&#39;: 5,
         &#39;description&#39;: &#39;Specify the maximum number of outlier &#39;
                        &#39;rejection iterations to use if robust=True.&#39;,
         &#39;dtype&#39;: &#39;int&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
        {&#39;key&#39;: &#39;resample_params&#39;,
         &#39;name&#39;: &#39;3D Resample Parameters&#39;,
         &#39;wtype&#39;: &#39;group&#39;},
        {&#39;key&#39;: &#39;fit_order&#39;,
         &#39;name&#39;: &#39;Spatial surface fit order&#39;,
         &#39;value&#39;: 0,
         &#39;description&#39;: &#39;Set lower for more stable fits.&#39;,
         &#39;dtype&#39;: &#39;int&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
        {&#39;key&#39;: &#39;fit_window&#39;,
         &#39;name&#39;: &#39;Spatial fit window (pixels)&#39;,
         &#39;value&#39;: 7.0,
         &#39;description&#39;: &#39;Set higher to fit more pixels.&#39;,
         &#39;dtype&#39;: &#39;float&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
        {&#39;key&#39;: &#39;smoothing&#39;,
         &#39;name&#39;: &#39;Spatial smoothing radius (pixels)&#39;,
         &#39;value&#39;: 2.0,
         &#39;description&#39;: &#39;Gaussian sigma. Set higher to &#39;
                        &#39;smooth over more pixels.&#39;,
         &#39;dtype&#39;: &#39;float&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
        {&#39;key&#39;: &#39;edge_threshold&#39;,
         &#39;name&#39;: &#39;Spatial edge threshold (0-1)&#39;,
         &#39;value&#39;: 0.0,
         &#39;description&#39;: &#39;Set higher to set more edge pixels to NaN.&#39;,
         &#39;dtype&#39;: &#39;float&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
        {&#39;key&#39;: &#39;adaptive_algorithm&#39;,
         &#39;name&#39;: &#39;Adaptive smoothing algorithm&#39;,
         &#39;wtype&#39;: &#39;combo_box&#39;,
         &#39;options&#39;: [&#39;scaled&#39;, &#39;shaped&#39;, &#39;none&#39;],
         &#39;option_index&#39;: 2,
         &#39;description&#39;: &#39;If scaled, only the size is allowed to vary.\n&#39;
                        &#39;If shaped, the kernel shape and rotation may \n&#39;
                        &#39;also vary. If none, the kernel will not vary.&#39;},
    ],
    &#39;make_response&#39;: [
        {&#39;key&#39;: &#39;save&#39;,
         &#39;name&#39;: &#39;Save output&#39;,
         &#39;value&#39;: True,
         &#39;description&#39;: &#39;Save output data to disk&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;model_file&#39;,
         &#39;name&#39;: &#39;Standard model file&#39;,
         &#39;value&#39;: &#39;&#39;,
         &#39;description&#39;: &#39;FITS file containing standard model spectrum. &#39;
                        &#39;Leave blank to determine from header.&#39;,
         &#39;dtype&#39;: &#39;str&#39;,
         &#39;wtype&#39;: &#39;pick_file&#39;},
    ],
    &#39;combine_response&#39;: [
        {&#39;key&#39;: &#39;general_params&#39;,
         &#39;name&#39;: &#39;General Parameters&#39;,
         &#39;wtype&#39;: &#39;group&#39;},
        {&#39;key&#39;: &#39;save&#39;,
         &#39;name&#39;: &#39;Save output&#39;,
         &#39;value&#39;: True,
         &#39;description&#39;: &#39;Save output data to disk&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;scale_params&#39;,
         &#39;name&#39;: &#39;Scaling Parameters&#39;,
         &#39;wtype&#39;: &#39;group&#39;},
        {&#39;key&#39;: &#39;scale_method&#39;,
         &#39;name&#39;: &#39;Scaling method&#39;,
         &#39;wtype&#39;: &#39;combo_box&#39;,
         &#39;options&#39;: [&#39;median&#39;, &#39;highest&#39;, &#39;lowest&#39;, &#39;index&#39;, &#39;none&#39;],
         &#39;option_index&#39;: 0,
         &#39;description&#39;: &#39;Select the scaling method.&#39;},
        {&#39;key&#39;: &#39;scale_index&#39;,
         &#39;name&#39;: &#39;Index of spectrum to scale to&#39;,
         &#39;value&#39;: 0,
         &#39;description&#39;: &#39;If scale_method=index, will scale to this spectrum.&#39;,
         &#39;dtype&#39;: &#39;int&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
        {&#39;key&#39;: &#39;combo_params&#39;,
         &#39;name&#39;: &#39;Combination Parameters&#39;,
         &#39;wtype&#39;: &#39;group&#39;},
        {&#39;key&#39;: &#39;combine_aps&#39;,
         &#39;name&#39;: &#39;Combine apertures&#39;,
         &#39;hidden&#39;: True,
         &#39;value&#39;: False,
         &#39;description&#39;: &#39;If set, apertures will be combined.&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;method&#39;,
         &#39;name&#39;: &#39;Combination method&#39;,
         &#39;wtype&#39;: &#39;combo_box&#39;,
         &#39;options&#39;: [&#39;mean&#39;, &#39;median&#39;],
         &#39;option_index&#39;: 0,
         &#39;description&#39;: &#39;Select the combination method.&#39;},
        {&#39;key&#39;: &#39;weighted&#39;,
         &#39;name&#39;: &#39;Weight by errors&#39;,
         &#39;value&#39;: True,
         &#39;description&#39;: &#39;If set, flux values are inversely weighted &#39;
                        &#39;by the error values before combination. &#39;
                        &#39;Ignored for method=median.&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;robust&#39;,
         &#39;name&#39;: &#39;Robust combination&#39;,
         &#39;value&#39;: True,
         &#39;description&#39;: &#39;If set, data will be sigma-clipped &#39;
                        &#39;before combination&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;threshold&#39;,
         &#39;name&#39;: &#39;Outlier rejection threshold (sigma)&#39;,
         &#39;value&#39;: 8.0,
         &#39;description&#39;: &#39;Specify the number of sigma to use in &#39;
                        &#39;sigma clip for robust algorithms.&#39;,
         &#39;dtype&#39;: &#39;float&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
        {&#39;key&#39;: &#39;maxiters&#39;,
         &#39;name&#39;: &#39;Maximum sigma-clipping iterations&#39;,
         &#39;value&#39;: 5,
         &#39;description&#39;: &#39;Specify the maximum number of outlier &#39;
                        &#39;rejection iterations to use if robust=True.&#39;,
         &#39;dtype&#39;: &#39;int&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
        {&#39;key&#39;: &#39;smooth_params&#39;,
         &#39;name&#39;: &#39;Smoothing Parameters&#39;,
         &#39;wtype&#39;: &#39;group&#39;},
        {&#39;key&#39;: &#39;fwhm&#39;,
         &#39;name&#39;: &#39;Smoothing Gaussian FWHM (pixels)&#39;,
         &#39;value&#39;: 2.0,
         &#39;description&#39;: &#39;FWHM of Gaussian to convolve with.\n&#39;
                        &#39;Set to zero to turn off smoothing.&#39;,
         &#39;dtype&#39;: &#39;float&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
    ],
    &#39;specmap&#39;: [
        {&#39;key&#39;: &#39;colormap&#39;,
         &#39;name&#39;: &#39;Color map&#39;,
         &#39;value&#39;: &#39;plasma&#39;,
         &#39;description&#39;: &#39;Matplotlib color map name.&#39;,
         &#39;dtype&#39;: &#39;str&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
        {&#39;key&#39;: &#39;scale&#39;,
         &#39;name&#39;: &#39;Flux scale for image&#39;,
         &#39;value&#39;: [0.25, 99.9],
         &#39;description&#39;: &#39;Specify a low and high percentile value for &#39;
                        &#39;the image scale, e.g. [0,99].&#39;,
         &#39;dtype&#39;: &#39;floatlist&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
        {&#39;key&#39;: &#39;n_contour&#39;,
         &#39;name&#39;: &#39;Number of contours&#39;,
         &#39;value&#39;: 0,
         &#39;description&#39;: &#39;Set to 0 to turn off countours.&#39;,
         &#39;dtype&#39;: &#39;int&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
        {&#39;key&#39;: &#39;contour_color&#39;,
         &#39;name&#39;: &#39;Contour color&#39;,
         &#39;value&#39;: &#39;gray&#39;,
         &#39;description&#39;: &#39;Matplotlib color name.&#39;,
         &#39;dtype&#39;: &#39;str&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
        {&#39;key&#39;: &#39;fill_contours&#39;,
         &#39;name&#39;: &#39;Filled contours&#39;,
         &#39;value&#39;: False,
         &#39;description&#39;: &#39;If set, contours will be filled instead of overlaid.&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;grid&#39;,
         &#39;name&#39;: &#39;Overlay grid&#39;,
         &#39;value&#39;: False,
         &#39;description&#39;: &#39;If set, a coordinate grid will be overlaid.&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;watermark&#39;,
         &#39;name&#39;: &#39;Watermark text&#39;,
         &#39;value&#39;: &#39;&#39;,
         &#39;description&#39;: &#39;Text to add to image as a watermark.&#39;,
         &#39;dtype&#39;: &#39;str&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
        {&#39;key&#39;: &#39;ignore_outer&#39;,
         &#39;name&#39;: &#39;Fraction of outer wavelengths to ignore&#39;,
         &#39;value&#39;: 0.0,
         &#39;description&#39;: &#39;Used to block edge effects for noisy &#39;
                        &#39;spectral orders. \n&#39;
                        &#39;Set to 0 to include all wavelengths in the plot.&#39;,
         &#39;dtype&#39;: &#39;float&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
        {&#39;key&#39;: &#39;atran_plot&#39;,
         &#39;name&#39;: &#39;Overplot transmission&#39;,
         &#39;value&#39;: True,
         &#39;description&#39;: &#39;If set, the atmospheric transmission spectrum will\n &#39;
                        &#39;be displayed in the spectral plot.&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;error_plot&#39;,
         &#39;name&#39;: &#39;Overplot error range&#39;,
         &#39;value&#39;: True,
         &#39;description&#39;: &#39;If set, the error range will\n &#39;
                        &#39;be overlaid on the spectral plot.&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;spec_scale&#39;,
         &#39;name&#39;: &#39;Flux scale for spectral plot&#39;,
         &#39;value&#39;: [0, 100],
         &#39;description&#39;: &#39;Specify a low and high percentile value for &#39;
                        &#39;the spectral flux scale, e.g. [0,99].&#39;,
         &#39;dtype&#39;: &#39;floatlist&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
        {&#39;key&#39;: &#39;override_slice&#39;,
         &#39;name&#39;: &#39;Override wavelength slice for spectral cube&#39;,
         &#39;value&#39;: &#39;&#39;,
         &#39;description&#39;: &#39;Manually specify the wavelength slice &#39;
                        &#39;(zero-indexed) for the image.&#39;,
         &#39;dtype&#39;: &#39;str&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
        {&#39;key&#39;: &#39;override_point&#39;,
         &#39;name&#39;: &#39;Override spatial point for spectral cube&#39;,
         &#39;value&#39;: &#39;&#39;,
         &#39;description&#39;: &quot;Manually specify the spatial &quot;
                        &quot;index for the spectrum, as &#39;x,y&#39;, &quot;
                        &quot;zero-indexed.&quot;,
         &#39;dtype&#39;: &#39;str&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
    ],
}


<div class="viewcode-block" id="FORCASTSpectroscopyParameters"><a class="viewcode-back" href="../../../../../api/sofia_redux.pipeline.sofia.parameters.forcast_spectroscopy_parameters.FORCASTSpectroscopyParameters.html#sofia_redux.pipeline.sofia.parameters.forcast_spectroscopy_parameters.FORCASTSpectroscopyParameters">[docs]</a>class FORCASTSpectroscopyParameters(FORCASTParameters):
    &quot;&quot;&quot;Reduction parameters for the FORCAST spectroscopy pipeline.&quot;&quot;&quot;
    def __init__(self, default=None, drip_cal_config=None,
                 drip_config=None):
        &quot;&quot;&quot;
        Initialize parameters with default values.

        The various config files are used to override certain
        parameter defaults for particular observation modes,
        or dates, etc.

        Parameters
        ----------
        drip_cal_config : dict-like, optional
            Reduction mode and auxiliary file configuration mapping,
            as returned from the sofia_redux.instruments.forcast
            `getcalpath` function.
        drip_config : dict-like, optional
            DRIP configuration, as loaded by the
            sofia_redux.instruments.forcast `configuration` function.
        &quot;&quot;&quot;
        if default is None:
            default = DEFAULT.copy()
            default.update(SPECTRAL_DEFAULT)
        super().__init__(default=default,
                         drip_cal_config=drip_cal_config,
                         drip_config=drip_config)

<div class="viewcode-block" id="FORCASTSpectroscopyParameters.stack_dithers"><a class="viewcode-back" href="../../../../../api/sofia_redux.pipeline.sofia.parameters.forcast_spectroscopy_parameters.FORCASTSpectroscopyParameters.html#sofia_redux.pipeline.sofia.parameters.forcast_spectroscopy_parameters.FORCASTSpectroscopyParameters.stack_dithers">[docs]</a>    def stack_dithers(self, step_index):
        &quot;&quot;&quot;
        Modify parameters for the stack dithers step.

        Set to skip stacking for slitscan.

        Parameters
        ----------
        step_index : int
            Reduction recipe index for the step.
        &quot;&quot;&quot;
        if self.drip_cal_config is not None:
            if &#39;scan&#39; in str(self.drip_cal_config[&#39;cnmode&#39;]).lower():
                self.current[step_index].set_value(&#39;skip_stack&#39;, True)</div>

<div class="viewcode-block" id="FORCASTSpectroscopyParameters.make_profiles"><a class="viewcode-back" href="../../../../../api/sofia_redux.pipeline.sofia.parameters.forcast_spectroscopy_parameters.FORCASTSpectroscopyParameters.html#sofia_redux.pipeline.sofia.parameters.forcast_spectroscopy_parameters.FORCASTSpectroscopyParameters.make_profiles">[docs]</a>    def make_profiles(self, step_index):
        &quot;&quot;&quot;
        Modify parameters for the profile step.

        Sets default wavefile and sets background subtraction
        according to `drip_cal_config`.

        Parameters
        ----------
        step_index : int
            Reduction recipe index for the step.
        &quot;&quot;&quot;
        if self.drip_cal_config is not None:
            # set default wave and slit file from cal config
            if &#39;wavefile&#39; in self.drip_cal_config:
                self.current[step_index].set_value(
                    &#39;wavefile&#39;, self.drip_cal_config[&#39;wavefile&#39;])
            if &#39;slitfile&#39; in self.drip_cal_config:
                self.current[step_index].set_value(
                    &#39;slitfile&#39;, self.drip_cal_config[&#39;slitfile&#39;])

            # set background subtraction to false for extended sources
            # and slit scans
            unfittable = \
                (&#39;extended&#39; in str(self.drip_cal_config[&#39;srctype&#39;]).lower()) \
                or (&#39;scan&#39; in str(self.drip_cal_config[&#39;cnmode&#39;]).lower())
            if unfittable:
                self.current[step_index].set_value(&#39;bg_sub&#39;, False)</div>

<div class="viewcode-block" id="FORCASTSpectroscopyParameters.locate_apertures"><a class="viewcode-back" href="../../../../../api/sofia_redux.pipeline.sofia.parameters.forcast_spectroscopy_parameters.FORCASTSpectroscopyParameters.html#sofia_redux.pipeline.sofia.parameters.forcast_spectroscopy_parameters.FORCASTSpectroscopyParameters.locate_apertures">[docs]</a>    def locate_apertures(self, step_index):
        &quot;&quot;&quot;
        Modify parameters for the locate apertures step.

        Sets defaults according to observation parameters in
        `drip_cal_config`.

        Parameters
        ----------
        step_index : int
            Reduction recipe index for the step.
        &quot;&quot;&quot;
        if self.drip_cal_config is not None:
            # set detection method: fix to center for slitscan
            # and extended, otherwise auto
            unfittable = \
                (&#39;extended&#39; in str(self.drip_cal_config[&#39;srctype&#39;]).lower()) \
                or (&#39;scan&#39; in str(self.drip_cal_config[&#39;cnmode&#39;]).lower())
            if unfittable:
                self.current[step_index].set_value(&#39;method&#39;, &#39;fix to center&#39;)</div>

<div class="viewcode-block" id="FORCASTSpectroscopyParameters.trace_continuum"><a class="viewcode-back" href="../../../../../api/sofia_redux.pipeline.sofia.parameters.forcast_spectroscopy_parameters.FORCASTSpectroscopyParameters.html#sofia_redux.pipeline.sofia.parameters.forcast_spectroscopy_parameters.FORCASTSpectroscopyParameters.trace_continuum">[docs]</a>    def trace_continuum(self, step_index):
        &quot;&quot;&quot;
        Modify parameters for the trace continuum step.

        Sets defaults according to observation parameters in
        `drip_cal_config`.

        Parameters
        ----------
        step_index : int
            Reduction recipe index for the step.
        &quot;&quot;&quot;
        if self.drip_cal_config is not None:
            # set trace method: fix to aperture position for slitscan
            # and extended, otherwise auto
            unfittable = \
                (&#39;extended&#39; in str(self.drip_cal_config[&#39;srctype&#39;]).lower()) \
                or (&#39;scan&#39; in str(self.drip_cal_config[&#39;cnmode&#39;]).lower())
            if unfittable:
                self.current[step_index].set_value(&#39;method&#39;,
                                                   &#39;fix to aperture position&#39;)</div>

<div class="viewcode-block" id="FORCASTSpectroscopyParameters.set_apertures"><a class="viewcode-back" href="../../../../../api/sofia_redux.pipeline.sofia.parameters.forcast_spectroscopy_parameters.FORCASTSpectroscopyParameters.html#sofia_redux.pipeline.sofia.parameters.forcast_spectroscopy_parameters.FORCASTSpectroscopyParameters.set_apertures">[docs]</a>    def set_apertures(self, step_index):
        &quot;&quot;&quot;
        Modify parameters for the set apertures step.

        Sets defaults according to observation parameters in
        `drip_cal_config`.

        Parameters
        ----------
        step_index : int
            Reduction recipe index for the step.
        &quot;&quot;&quot;
        if self.drip_cal_config is not None:
            # set to full slit for extended or slitscan
            unfittable = \
                (&#39;extended&#39; in str(self.drip_cal_config[&#39;srctype&#39;]).lower()) \
                or (&#39;scan&#39; in str(self.drip_cal_config[&#39;cnmode&#39;]).lower())
            if unfittable:
                self.current[step_index].set_value(&#39;full_slit&#39;, True)</div>

<div class="viewcode-block" id="FORCASTSpectroscopyParameters.extract_spectra"><a class="viewcode-back" href="../../../../../api/sofia_redux.pipeline.sofia.parameters.forcast_spectroscopy_parameters.FORCASTSpectroscopyParameters.html#sofia_redux.pipeline.sofia.parameters.forcast_spectroscopy_parameters.FORCASTSpectroscopyParameters.extract_spectra">[docs]</a>    def extract_spectra(self, step_index):
        &quot;&quot;&quot;
        Modify parameters for the set apertures step.

        Sets defaults according to observation parameters in
        `drip_cal_config`.

        Parameters
        ----------
        step_index : int
            Reduction recipe index for the step.
        &quot;&quot;&quot;
        if self.drip_cal_config is not None:
            # set to standard for extended or slitscan
            unfittable = \
                (&#39;extended&#39; in str(self.drip_cal_config[&#39;srctype&#39;]).lower()) \
                or (&#39;scan&#39; in str(self.drip_cal_config[&#39;cnmode&#39;]).lower())
            if unfittable:
                self.current[step_index].set_value(&#39;method&#39;, &#39;standard&#39;)</div>

<div class="viewcode-block" id="FORCASTSpectroscopyParameters.flux_calibrate"><a class="viewcode-back" href="../../../../../api/sofia_redux.pipeline.sofia.parameters.forcast_spectroscopy_parameters.FORCASTSpectroscopyParameters.html#sofia_redux.pipeline.sofia.parameters.forcast_spectroscopy_parameters.FORCASTSpectroscopyParameters.flux_calibrate">[docs]</a>    def flux_calibrate(self, step_index):
        &quot;&quot;&quot;
        Modify parameters for the flux calibrate step.

        Sets default response file and resolution.
        Turns off auto optimization for G111 grism.

        Parameters
        ----------
        step_index : int
            Reduction recipe index for the step.
        &quot;&quot;&quot;
        if self.drip_cal_config is not None:
            # set default response file from cal config
            if &#39;respfile&#39; in self.drip_cal_config:
                self.current[step_index].set_value(
                    &#39;respfile&#39;, self.drip_cal_config[&#39;respfile&#39;])
            if &#39;resolution&#39; in self.drip_cal_config:
                self.current[step_index].set_value(
                    &#39;resolution&#39;, self.drip_cal_config[&#39;resolution&#39;])

            # turn off optimization and auto shift for G111 grism
            no_opt = (self.drip_cal_config[&#39;name&#39;] == &#39;G111&#39;)
            if no_opt:
                self.current[step_index].set_value(&#39;optimize_atran&#39;, False)
                self.current[step_index].set_value(&#39;auto_shift&#39;, False)

            # set &#39;making_response&#39; if flux standard
            rsp = (&#39;STANDARD&#39; in self.drip_cal_config[&#39;obstype&#39;])
            if rsp:
                self.current[step_index].set_value(&#39;making_response&#39;, True)
                self.current[step_index].set_value(&#39;save&#39;, False)</div>

<div class="viewcode-block" id="FORCASTSpectroscopyParameters.combine_spectra"><a class="viewcode-back" href="../../../../../api/sofia_redux.pipeline.sofia.parameters.forcast_spectroscopy_parameters.FORCASTSpectroscopyParameters.html#sofia_redux.pipeline.sofia.parameters.forcast_spectroscopy_parameters.FORCASTSpectroscopyParameters.combine_spectra">[docs]</a>    def combine_spectra(self, step_index):
        &quot;&quot;&quot;
        Modify parameters for the combine spectra step.

        Set to make spectral cube for slitscan.

        Parameters
        ----------
        step_index : int
            Reduction recipe index for the step.
        &quot;&quot;&quot;
        if self.drip_cal_config is not None:
            # set cube if slitscan
            if &#39;scan&#39; in str(self.drip_cal_config[&#39;cnmode&#39;]).lower():
                self.current[step_index].set_value(&#39;method&#39;, &#39;spectral cube&#39;)</div></div>
</pre></div>

            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><h3>Page Contents</h3>


        </div>
      </div>
      <div class="clearer"></div>
    </div>
<footer class="footer">
  <p class="pull-right"> &nbsp;
    <a href="#">Back to Top</a></p>
  <p>
    &copy; Copyright 2023, SOFIA-USRA.<br/>
    Created using <a href="http://www.sphinx-doc.org/en/stable/">Sphinx</a> 7.1.2. &nbsp;
    Last built 13 Aug 2023. <br/>
  </p>
</footer>
  </body>
</html>