<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>CorrelatedMode &#8212; sofia_redux v1.3.4.dev0</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sofia.css?v=3fe2c07e" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=eafc0fe6" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    
    <script src="../_static/jquery.js?v=5d32c60e"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js?v=602f4d50"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=4825356b"></script>
    <script type="text/javascript" src="../_static/sidebar.js"></script>
    <script type="text/javascript" src="../_static/copybutton.js"></script>
    <link rel="icon" href="../_static/redux.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="FieldResponse" href="sofia_redux.scan.channels.mode.field_response.FieldResponse.html" />
    <link rel="prev" title="ChopperResponse" href="sofia_redux.scan.channels.mode.chopper_response.ChopperResponse.html" />
    <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,600' rel='stylesheet' type='text/css'/>

  </head><body>
<div class="topbar">
  <a class="brand" title="Documentation Home" href="../index.html"><span id="logotext1">SOFIA</span><span id="logotext2">Redux</span><span id="logotext3">:docs</span></a>
  <ul>
    <li><a class="homelink" title="SOFIA Homepage" href="https://www.sofia.usra.edu/"></a></li>
    <li><a title="General Index" href="../genindex.html">Index</a></li>
    <li><a title="Module Index" href="../py-modindex.html">Modules</a></li>
    <li>
      
      
<form action="../search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
      
    </li>
  </ul>
</div>

<div class="related">
    <h3>Navigation</h3>
    <ul>
      <li class="right">
	<a href="sofia_redux.scan.channels.mode.field_response.FieldResponse.html" title="FieldResponse">
	  next &raquo;
	</a>
      </li>
      <li class="right">
	<a href="sofia_redux.scan.channels.mode.chopper_response.ChopperResponse.html" title="ChopperResponse">
	  &laquo; previous
	</a>
	 |
      </li>
      <li>
	<a href="../index.html">sofia_redux v1.3.4.dev0</a>
	 &#187;
      </li>
      <li><a href="../sofia_redux/index.html" >SOFIA Redux</a> &#187;</li>
      <li><a href="../sofia_redux/scan/index.html" accesskey="U">sofia_redux.scan: Scan Mode Algorithms for SOFIA Pipelines</a> &#187;</li>
      
      <li>CorrelatedMode</li> 
    </ul>
</div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="correlatedmode">
<h1>CorrelatedMode<a class="headerlink" href="#correlatedmode" title="Permalink to this heading">¶</a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="sofia_redux.scan.channels.mode.correlated_mode.CorrelatedMode">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sofia_redux.scan.channels.mode.correlated_mode.</span></span><span class="sig-name descname"><span class="pre">CorrelatedMode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">channel_group</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gain_provider</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sofia_redux/scan/channels/mode/correlated_mode.html#CorrelatedMode"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sofia_redux.scan.channels.mode.correlated_mode.CorrelatedMode" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="sofia_redux.scan.channels.mode.mode.Mode.html#sofia_redux.scan.channels.mode.mode.Mode" title="sofia_redux.scan.channels.mode.mode.Mode"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mode</span></code></a></p>
<p>Create a correlated mode operating on a given channel group.</p>
<p>A mode is an object that is applied to a given channel group, defining
what constitutes its “gain” and how to operate thereon.  This is
also dependent on a gain provider.</p>
<p>The correlated mode normalizes gains by the typical gain magnitude.
It also provides methods to update signals in an integration.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>channel_group</strong><span class="classifier">ChannelGroup, optional</span></dt><dd><p>The channel group owned by the mode.</p>
</dd>
<dt><strong>gain_provider</strong><span class="classifier">str or GainProvider, optional</span></dt><dd><p>If a string is provided a <code class="xref py py-obj docutils literal notranslate"><span class="pre">FieldGainProvider</span></code> will be set to
operate on the given field of the channel group.</p>
</dd>
<dt><strong>name</strong><span class="classifier">str, optional</span></dt><dd><p>The name of the mode.  If not provided, will be determined from the
channel group name (if available).</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Methods Summary</p>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#sofia_redux.scan.channels.mode.correlated_mode.CorrelatedMode.get_gains" title="sofia_redux.scan.channels.mode.correlated_mode.CorrelatedMode.get_gains"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_gains</span></code></a>([validate])</p></td>
<td><p>Return the normalized gain values of the correlated mode.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#sofia_redux.scan.channels.mode.correlated_mode.CorrelatedMode.get_valid_channels" title="sofia_redux.scan.channels.mode.correlated_mode.CorrelatedMode.get_valid_channels"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_valid_channels</span></code></a>()</p></td>
<td><p>Return a channel group containing channels not flagged by <code class="xref py py-obj docutils literal notranslate"><span class="pre">skip_flags</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#sofia_redux.scan.channels.mode.correlated_mode.CorrelatedMode.normalize_gains" title="sofia_redux.scan.channels.mode.correlated_mode.CorrelatedMode.normalize_gains"><code class="xref py py-obj docutils literal notranslate"><span class="pre">normalize_gains</span></code></a>([gain])</p></td>
<td><p>Normalizes the supplied (or contained) gains and returns the average.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#sofia_redux.scan.channels.mode.correlated_mode.CorrelatedMode.set_channel_group" title="sofia_redux.scan.channels.mode.correlated_mode.CorrelatedMode.set_channel_group"><code class="xref py py-obj docutils literal notranslate"><span class="pre">set_channel_group</span></code></a>(channel_group)</p></td>
<td><p>Apply a channel group to the correlated mode.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#sofia_redux.scan.channels.mode.correlated_mode.CorrelatedMode.set_gains" title="sofia_redux.scan.channels.mode.correlated_mode.CorrelatedMode.set_gains"><code class="xref py py-obj docutils literal notranslate"><span class="pre">set_gains</span></code></a>(gain[, flag_normalized])</p></td>
<td><p>Set the gain values of the mode.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#sofia_redux.scan.channels.mode.correlated_mode.CorrelatedMode.update_signals" title="sofia_redux.scan.channels.mode.correlated_mode.CorrelatedMode.update_signals"><code class="xref py py-obj docutils literal notranslate"><span class="pre">update_signals</span></code></a>(integration[, robust])</p></td>
<td><p>Update signals in an integration.</p></td>
</tr>
</tbody>
</table>
<p class="rubric">Methods Documentation</p>
<dl class="py method">
<dt class="sig sig-object py" id="sofia_redux.scan.channels.mode.correlated_mode.CorrelatedMode.get_gains">
<span class="sig-name descname"><span class="pre">get_gains</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">validate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sofia_redux/scan/channels/mode/correlated_mode.html#CorrelatedMode.get_gains"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sofia_redux.scan.channels.mode.correlated_mode.CorrelatedMode.get_gains" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the normalized gain values of the correlated mode.</p>
<p>If no gains are available and no gain provider is available, will
return an array of ones.  The gains returned will always be normalized
with respect to the typical gain values of the gain flagged channels.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>validate</strong><span class="classifier">bool, optional</span></dt><dd><p>If <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a> (default), will cause the gain provider to “validate”
the mode itself.  This could mean anything and is dependent on the
gain provider.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>gains</strong><span class="classifier">numpy.ndarray (float)</span></dt><dd><p>The gain values.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sofia_redux.scan.channels.mode.correlated_mode.CorrelatedMode.get_valid_channels">
<span class="sig-name descname"><span class="pre">get_valid_channels</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sofia_redux/scan/channels/mode/correlated_mode.html#CorrelatedMode.get_valid_channels"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sofia_redux.scan.channels.mode.correlated_mode.CorrelatedMode.get_valid_channels" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a channel group containing channels not flagged by <code class="xref py py-obj docutils literal notranslate"><span class="pre">skip_flags</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt>ChannelGroup</dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sofia_redux.scan.channels.mode.correlated_mode.CorrelatedMode.normalize_gains">
<span class="sig-name descname"><span class="pre">normalize_gains</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">gain</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sofia_redux/scan/channels/mode/correlated_mode.html#CorrelatedMode.normalize_gains"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sofia_redux.scan.channels.mode.correlated_mode.CorrelatedMode.normalize_gains" title="Permalink to this definition">¶</a></dt>
<dd><p>Normalizes the supplied (or contained) gains and returns the average.</p>
<p>If no gains are supplied, they are retrieved from the gain provider and
normalized by the typical gain magnitude of the gain flagged channels.
Note that if this is the case, the gain provider will store the
normalized values.  The average (normalization factor) is returned to
the caller.</p>
<p>Note that unlike the parent Mode class, average gain values are those
derived from channels only flagged by the gain type flag, not those
that include the gain flag.  However, no flagging of gain values will
occur.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>gain</strong><span class="classifier">numpy.ndarray (float), optional</span></dt><dd><p>The gain values to normalize.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>average_gain</strong><span class="classifier">float</span></dt><dd><p>The average gain prior to normalization.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sofia_redux.scan.channels.mode.correlated_mode.CorrelatedMode.set_channel_group">
<span class="sig-name descname"><span class="pre">set_channel_group</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">channel_group</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sofia_redux/scan/channels/mode/correlated_mode.html#CorrelatedMode.set_channel_group"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sofia_redux.scan.channels.mode.correlated_mode.CorrelatedMode.set_channel_group" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply a channel group to the correlated mode.</p>
<p>All channel flags except for the zero flag will be marked as flags to
ignore by the correlated mode.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>channel_group</strong><span class="classifier">ChannelGroup</span></dt><dd></dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>None</dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sofia_redux.scan.channels.mode.correlated_mode.CorrelatedMode.set_gains">
<span class="sig-name descname"><span class="pre">set_gains</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">gain</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flag_normalized</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sofia_redux/scan/channels/mode/correlated_mode.html#CorrelatedMode.set_gains"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sofia_redux.scan.channels.mode.correlated_mode.CorrelatedMode.set_gains" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the gain values of the mode.</p>
<p>If a gain provider is available, it will be used to update the gain
values, which could also update values in the channel group.  Gains
may be flagged depending on whether a gain range has been set
(in the <code class="xref py py-obj docutils literal notranslate"><span class="pre">gain_range</span></code> attribute).  Note that any flagging will back
propagate to the channel group and therefore, the channels themselves.</p>
<p>Correlated mode</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>gain</strong><span class="classifier">numpy.ndarray (float)</span></dt><dd><p>The new gain values to apply.</p>
</dd>
<dt><strong>flag_normalized</strong><span class="classifier">bool, optional</span></dt><dd><p>If <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>, will flag gain values outside the gain range after
normalizing to the average gain value of those previously flagged.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>flagging</strong><span class="classifier">bool</span></dt><dd><p>If gain flagging was performed.  This does not necessarily mean
any channels were flagged, just that it was attempted.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sofia_redux.scan.channels.mode.correlated_mode.CorrelatedMode.update_signals">
<span class="sig-name descname"><span class="pre">update_signals</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">integration</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">robust</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sofia_redux/scan/channels/mode/correlated_mode.html#CorrelatedMode.update_signals"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sofia_redux.scan.channels.mode.correlated_mode.CorrelatedMode.update_signals" title="Permalink to this definition">¶</a></dt>
<dd><p>Update signals in an integration.</p>
<p>If the integration does not contain the required signal, it will be
added to the integration.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>integration</strong><span class="classifier">Integration</span></dt><dd></dd>
<dt><strong>robust</strong><span class="classifier">bool, optional</span></dt><dd><p>If <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>, update the signals using the “robust” (median) method.
Otherwise, use a weighted mean.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>None</dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><h3>Page Contents</h3>
<ul>
<li><a class="reference internal" href="#">CorrelatedMode</a><ul>
<li><a class="reference internal" href="#sofia_redux.scan.channels.mode.correlated_mode.CorrelatedMode"><code class="docutils literal notranslate"><span class="pre">CorrelatedMode</span></code></a><ul>
<li><a class="reference internal" href="#sofia_redux.scan.channels.mode.correlated_mode.CorrelatedMode.get_gains"><code class="docutils literal notranslate"><span class="pre">CorrelatedMode.get_gains()</span></code></a></li>
<li><a class="reference internal" href="#sofia_redux.scan.channels.mode.correlated_mode.CorrelatedMode.get_valid_channels"><code class="docutils literal notranslate"><span class="pre">CorrelatedMode.get_valid_channels()</span></code></a></li>
<li><a class="reference internal" href="#sofia_redux.scan.channels.mode.correlated_mode.CorrelatedMode.normalize_gains"><code class="docutils literal notranslate"><span class="pre">CorrelatedMode.normalize_gains()</span></code></a></li>
<li><a class="reference internal" href="#sofia_redux.scan.channels.mode.correlated_mode.CorrelatedMode.set_channel_group"><code class="docutils literal notranslate"><span class="pre">CorrelatedMode.set_channel_group()</span></code></a></li>
<li><a class="reference internal" href="#sofia_redux.scan.channels.mode.correlated_mode.CorrelatedMode.set_gains"><code class="docutils literal notranslate"><span class="pre">CorrelatedMode.set_gains()</span></code></a></li>
<li><a class="reference internal" href="#sofia_redux.scan.channels.mode.correlated_mode.CorrelatedMode.update_signals"><code class="docutils literal notranslate"><span class="pre">CorrelatedMode.update_signals()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>


        </div>
      </div>
      <div class="clearer"></div>
    </div>
<footer class="footer">
  <p class="pull-right">
    <a href="../_sources/api/sofia_redux.scan.channels.mode.correlated_mode.CorrelatedMode.rst.txt"
       rel="nofollow">Page Source</a> &nbsp;
    <a href="#">Back to Top</a></p>
  <p>
    &copy; Copyright 2023, SOFIA-USRA.<br/>
    Created using <a href="http://www.sphinx-doc.org/en/stable/">Sphinx</a> 7.1.2. &nbsp;
    Last built 13 Aug 2023. <br/>
  </p>
</footer>
  </body>
</html>