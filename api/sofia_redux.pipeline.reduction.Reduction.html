<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Reduction &#8212; sofia_redux v1.3.4.dev0</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sofia.css?v=3fe2c07e" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=eafc0fe6" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    
    <script src="../_static/jquery.js?v=5d32c60e"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js?v=602f4d50"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=4825356b"></script>
    <script type="text/javascript" src="../_static/sidebar.js"></script>
    <script type="text/javascript" src="../_static/copybutton.js"></script>
    <link rel="icon" href="../_static/redux.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Viewer" href="sofia_redux.pipeline.viewer.Viewer.html" />
    <link rel="prev" title="Pipe" href="sofia_redux.pipeline.pipe.Pipe.html" />
    <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,600' rel='stylesheet' type='text/css'/>

  </head><body>
<div class="topbar">
  <a class="brand" title="Documentation Home" href="../index.html"><span id="logotext1">SOFIA</span><span id="logotext2">Redux</span><span id="logotext3">:docs</span></a>
  <ul>
    <li><a class="homelink" title="SOFIA Homepage" href="https://www.sofia.usra.edu/"></a></li>
    <li><a title="General Index" href="../genindex.html">Index</a></li>
    <li><a title="Module Index" href="../py-modindex.html">Modules</a></li>
    <li>
      
      
<form action="../search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
      
    </li>
  </ul>
</div>

<div class="related">
    <h3>Navigation</h3>
    <ul>
      <li class="right">
	<a href="sofia_redux.pipeline.viewer.Viewer.html" title="Viewer">
	  next &raquo;
	</a>
      </li>
      <li class="right">
	<a href="sofia_redux.pipeline.pipe.Pipe.html" title="Pipe">
	  &laquo; previous
	</a>
	 |
      </li>
      <li>
	<a href="../index.html">sofia_redux v1.3.4.dev0</a>
	 &#187;
      </li>
      <li><a href="../sofia_redux/index.html" >SOFIA Redux</a> &#187;</li>
      <li><a href="../sofia_redux/pipeline/index.html" accesskey="U">sofia_redux.pipeline: Data Reduction Pipelines for SOFIA</a> &#187;</li>
      
      <li>Reduction</li> 
    </ul>
</div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="reduction">
<h1>Reduction<a class="headerlink" href="#reduction" title="Permalink to this heading">¶</a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="sofia_redux.pipeline.reduction.Reduction">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sofia_redux.pipeline.reduction.</span></span><span class="sig-name descname"><span class="pre">Reduction</span></span><a class="reference internal" href="../_modules/sofia_redux/pipeline/reduction.html#Reduction"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sofia_redux.pipeline.reduction.Reduction" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Reduction steps and data.</p>
<dl class="field-list">
<dt class="field-odd">Attributes<span class="colon">:</span></dt>
<dd class="field-odd"><dl>
<dt><strong>name</strong><span class="classifier">str</span></dt><dd><p>Name of the reduction type.</p>
</dd>
<dt><strong>instrument</strong><span class="classifier">str</span></dt><dd><p>Name of the instrument supported by this reduction object.</p>
</dd>
<dt><strong>mode</strong><span class="classifier">str</span></dt><dd><p>Name of the instrument mode supported by this object.</p>
</dd>
<dt><strong>pipe_name</strong><span class="classifier">str</span></dt><dd><p>Name of the data reduction software package.</p>
</dd>
<dt><strong>pipe_version</strong><span class="classifier">str</span></dt><dd><p>Pipeline version.</p>
</dd>
<dt><strong>param_file</strong><span class="classifier">str</span></dt><dd><p>Input parameter file, if provided.</p>
</dd>
<dt><strong>parameters</strong><span class="classifier">Parameters</span></dt><dd><p>A Redux Parameters object.  This will hold all current values
of reduction parameters, to be provided to the steps when they
are run.</p>
</dd>
<dt><strong>recipe</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">list</span></code></a> of str</span></dt><dd><p>List of processing steps to run.  Normally, the step names
are method names implemented in the current reduction class.</p>
</dd>
<dt><strong>processing_steps</strong><span class="classifier">dict</span></dt><dd><p>Dictionary associating pipeline step names with more
descriptive display names.</p>
</dd>
<dt><strong>step_index</strong><span class="classifier">int</span></dt><dd><p>The current step in the recipe, to be run next.</p>
</dd>
<dt><strong>error</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">list</span></code></a> of str</span></dt><dd><p>A list of error messaged generated by reduction steps,
for reporting back to the user.</p>
</dd>
<dt><strong>data_keys</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">list</span></code></a> of str</span></dt><dd><p>A list of keywords that describe the input data, for display
to the user.  ‘File Name’ and ‘File Size’ keywords have
general definitions applicable to most input types.
Other keywords are assumed to be readable from the data structure’s
.header attribute, as <code class="docutils literal notranslate"><span class="pre">data.header[key]</span></code>.</p>
</dd>
<dt><strong>data_id</strong><span class="classifier"><code class="xref py py-obj docutils literal notranslate"><span class="pre">OrderedDict</span></code></span></dt><dd><p>Holds the association between <code class="xref py py-obj docutils literal notranslate"><span class="pre">data_keys</span></code> and values for the
currently loaded data.</p>
</dd>
<dt><strong>allow_undo</strong><span class="classifier">bool</span></dt><dd><p>Flag to indicate whether an ‘undo’ operation should be allowed
in GUI context.  The undo operation is based on a serialization
of this object: if the current object cannot be serialized, or
if it would be too memory-expensive to do so, this flag should
be set to False.</p>
</dd>
<dt><strong>raw_files</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">list</span></code></a> of str</span></dt><dd><p>Input file paths.</p>
</dd>
<dt><strong>out_files</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">list</span></code></a> of str</span></dt><dd><p>Output file paths, for files generated by the current reduction.</p>
</dd>
<dt><strong>input</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">list</span></code></a></span></dt><dd><p>Input data for the next processing step.  List members may be
any type understood by the processing step.</p>
</dd>
<dt><strong>display_data: dict</strong></dt><dd><p>Data to be displayed by any viewers associated with the current
reduction.  Keys should be the names of the viewers (<code class="xref py py-obj docutils literal notranslate"><span class="pre">Viewer.name</span></code>);
values may be any data type understood by the viewer.</p>
</dd>
<dt><strong>output_directory</strong><span class="classifier">str</span></dt><dd><p>Directory path to which any output files generated should be saved.</p>
</dd>
</dl>
</dd>
</dl>
<p>Initialize the reduction.</p>
<p class="rubric">Attributes Summary</p>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#sofia_redux.pipeline.reduction.Reduction.description" title="sofia_redux.pipeline.reduction.Reduction.description"><code class="xref py py-obj docutils literal notranslate"><span class="pre">description</span></code></a></p></td>
<td><p>str: Description of the reduction (name, instrument, and mode).</p></td>
</tr>
</tbody>
</table>
<p class="rubric">Methods Summary</p>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#sofia_redux.pipeline.reduction.Reduction.cleanup" title="sofia_redux.pipeline.reduction.Reduction.cleanup"><code class="xref py py-obj docutils literal notranslate"><span class="pre">cleanup</span></code></a>()</p></td>
<td><p>Perform any necessary cleanup tasks before shutting down.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#sofia_redux.pipeline.reduction.Reduction.edit_parameters" title="sofia_redux.pipeline.reduction.Reduction.edit_parameters"><code class="xref py py-obj docutils literal notranslate"><span class="pre">edit_parameters</span></code></a>(key[, step_index, value, ...])</p></td>
<td><p>Edit the parameters for a reduction step.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#sofia_redux.pipeline.reduction.Reduction.get_key_value" title="sofia_redux.pipeline.reduction.Reduction.get_key_value"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_key_value</span></code></a>(header, key)</p></td>
<td><p>Retrieve a value from a metadata header.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#sofia_redux.pipeline.reduction.Reduction.get_parameter_set" title="sofia_redux.pipeline.reduction.Reduction.get_parameter_set"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_parameter_set</span></code></a>([step_index])</p></td>
<td><p>Get the current parameter set for a step.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#sofia_redux.pipeline.reduction.Reduction.load" title="sofia_redux.pipeline.reduction.Reduction.load"><code class="xref py py-obj docutils literal notranslate"><span class="pre">load</span></code></a>(data)</p></td>
<td><p>Load input data to make it usable to reduction steps.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#sofia_redux.pipeline.reduction.Reduction.load_data_id" title="sofia_redux.pipeline.reduction.Reduction.load_data_id"><code class="xref py py-obj docutils literal notranslate"><span class="pre">load_data_id</span></code></a>()</p></td>
<td><p>Load the data description.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#sofia_redux.pipeline.reduction.Reduction.load_fits_files" title="sofia_redux.pipeline.reduction.Reduction.load_fits_files"><code class="xref py py-obj docutils literal notranslate"><span class="pre">load_fits_files</span></code></a>(data)</p></td>
<td><p>Load input FITS files into memory.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#sofia_redux.pipeline.reduction.Reduction.load_parameters" title="sofia_redux.pipeline.reduction.Reduction.load_parameters"><code class="xref py py-obj docutils literal notranslate"><span class="pre">load_parameters</span></code></a>()</p></td>
<td><p>Set the parameter list for the current reduction recipe.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#sofia_redux.pipeline.reduction.Reduction.log_input" title="sofia_redux.pipeline.reduction.Reduction.log_input"><code class="xref py py-obj docutils literal notranslate"><span class="pre">log_input</span></code></a>()</p></td>
<td><p>Log input data at INFO level.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#sofia_redux.pipeline.reduction.Reduction.log_reduce" title="sofia_redux.pipeline.reduction.Reduction.log_reduce"><code class="xref py py-obj docutils literal notranslate"><span class="pre">log_reduce</span></code></a>([end])</p></td>
<td><p>Log the pipeline name and version.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#sofia_redux.pipeline.reduction.Reduction.log_step" title="sofia_redux.pipeline.reduction.Reduction.log_step"><code class="xref py py-obj docutils literal notranslate"><span class="pre">log_step</span></code></a>(step_name[, params])</p></td>
<td><p>Log the reduction step name, time, and parameters.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#sofia_redux.pipeline.reduction.Reduction.read_data_key" title="sofia_redux.pipeline.reduction.Reduction.read_data_key"><code class="xref py py-obj docutils literal notranslate"><span class="pre">read_data_key</span></code></a>(key[, fname, header])</p></td>
<td><p>Read a data keyword from a metadata header.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#sofia_redux.pipeline.reduction.Reduction.record_outfile" title="sofia_redux.pipeline.reduction.Reduction.record_outfile"><code class="xref py py-obj docutils literal notranslate"><span class="pre">record_outfile</span></code></a>(outfile)</p></td>
<td><p>Store an output file name.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#sofia_redux.pipeline.reduction.Reduction.reduce" title="sofia_redux.pipeline.reduction.Reduction.reduce"><code class="xref py py-obj docutils literal notranslate"><span class="pre">reduce</span></code></a>()</p></td>
<td><p>Reduce the current data.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#sofia_redux.pipeline.reduction.Reduction.register_viewers" title="sofia_redux.pipeline.reduction.Reduction.register_viewers"><code class="xref py py-obj docutils literal notranslate"><span class="pre">register_viewers</span></code></a>()</p></td>
<td><p>Instantiate viewers appropriate to the reduction.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#sofia_redux.pipeline.reduction.Reduction.set_parameter_set" title="sofia_redux.pipeline.reduction.Reduction.set_parameter_set"><code class="xref py py-obj docutils literal notranslate"><span class="pre">set_parameter_set</span></code></a>(param[, step_index])</p></td>
<td><p>Set a parameter set for a reduction step.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#sofia_redux.pipeline.reduction.Reduction.step" title="sofia_redux.pipeline.reduction.Reduction.step"><code class="xref py py-obj docutils literal notranslate"><span class="pre">step</span></code></a>([alt_method])</p></td>
<td><p>Run a reduction step.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#sofia_redux.pipeline.reduction.Reduction.update_parameters" title="sofia_redux.pipeline.reduction.Reduction.update_parameters"><code class="xref py py-obj docutils literal notranslate"><span class="pre">update_parameters</span></code></a>()</p></td>
<td><p>Update parameter values for the current reduction.</p></td>
</tr>
</tbody>
</table>
<p class="rubric">Attributes Documentation</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="sofia_redux.pipeline.reduction.Reduction.description">
<span class="sig-name descname"><span class="pre">description</span></span><a class="headerlink" href="#sofia_redux.pipeline.reduction.Reduction.description" title="Permalink to this definition">¶</a></dt>
<dd><p>str: Description of the reduction (name, instrument, and mode).</p>
</dd></dl>

<p class="rubric">Methods Documentation</p>
<dl class="py method">
<dt class="sig sig-object py" id="sofia_redux.pipeline.reduction.Reduction.cleanup">
<span class="sig-name descname"><span class="pre">cleanup</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sofia_redux/pipeline/reduction.html#Reduction.cleanup"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sofia_redux.pipeline.reduction.Reduction.cleanup" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform any necessary cleanup tasks before shutting down.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sofia_redux.pipeline.reduction.Reduction.edit_parameters">
<span class="sig-name descname"><span class="pre">edit_parameters</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">step_index</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">options</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">option_index</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hidden</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sofia_redux/pipeline/reduction.html#Reduction.edit_parameters"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sofia_redux.pipeline.reduction.Reduction.edit_parameters" title="Permalink to this definition">¶</a></dt>
<dd><p>Edit the parameters for a reduction step.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>key</strong><span class="classifier">str</span></dt><dd><p>Parameter key name.</p>
</dd>
<dt><strong>step_index</strong><span class="classifier">int, optional</span></dt><dd><p>Index of the reduction step in the reduction recipe.
If not provided, the current step_index will be used.</p>
</dd>
<dt><strong>value</strong><span class="classifier">str, float, int, bool, or list; optional</span></dt><dd><p>Parameter value.</p>
</dd>
<dt><strong>options</strong><span class="classifier">list; optional</span></dt><dd><p>Enumerated parameter value options.</p>
</dd>
<dt><strong>option_index</strong><span class="classifier">int, optional</span></dt><dd><p>Index of the selected option, for enumerated values.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sofia_redux.pipeline.reduction.Reduction.get_key_value">
<span class="sig-name descname"><span class="pre">get_key_value</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">header</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sofia_redux/pipeline/reduction.html#Reduction.get_key_value"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sofia_redux.pipeline.reduction.Reduction.get_key_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve a value from a metadata header.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>header</strong><span class="classifier">dict-like</span></dt><dd><p>Metadata header.  May be any type for which the data is
accessible as header[key].</p>
</dd>
<dt><strong>key</strong><span class="classifier">str</span></dt><dd><p>Header keyword.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>str</dt><dd><p>String representation of the header value, or ‘UNKNOWN’ if
the keyword was not found or could not be converted to a
string.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sofia_redux.pipeline.reduction.Reduction.get_parameter_set">
<span class="sig-name descname"><span class="pre">get_parameter_set</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">step_index</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sofia_redux/pipeline/reduction.html#Reduction.get_parameter_set"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sofia_redux.pipeline.reduction.Reduction.get_parameter_set" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the current parameter set for a step.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>step_index</strong><span class="classifier">int, optional</span></dt><dd><p>Index of the step in the reduction recipe.  If not provided,
the current step_index will be used.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>ParameterSet</dt><dd><p>The parameters for the specified step.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sofia_redux.pipeline.reduction.Reduction.load">
<span class="sig-name descname"><span class="pre">load</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sofia_redux/pipeline/reduction.html#Reduction.load"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sofia_redux.pipeline.reduction.Reduction.load" title="Permalink to this definition">¶</a></dt>
<dd><p>Load input data to make it usable to reduction steps.</p>
<p>This function only stores the data as is in the raw_files
attribute.  This function should be overridden by subclasses
if more complex behavior is needed, e.g. to call the
<a class="reference internal" href="#sofia_redux.pipeline.reduction.Reduction.load_fits_files" title="sofia_redux.pipeline.reduction.Reduction.load_fits_files"><code class="xref py py-obj docutils literal notranslate"><span class="pre">load_fits_files</span></code></a> method, or set the display data variables.</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl>
<dt><strong>data</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">list</span></code></a> of str or str</span></dt><dd><p>Input data file names to be loaded.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sofia_redux.pipeline.reduction.Reduction.load_data_id">
<span class="sig-name descname"><span class="pre">load_data_id</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sofia_redux/pipeline/reduction.html#Reduction.load_data_id"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sofia_redux.pipeline.reduction.Reduction.load_data_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Load the data description.</p>
<p>Calls <a class="reference internal" href="#sofia_redux.pipeline.reduction.Reduction.read_data_key" title="sofia_redux.pipeline.reduction.Reduction.read_data_key"><code class="xref py py-obj docutils literal notranslate"><span class="pre">read_data_key</span></code></a> for all keys in the <code class="xref py py-obj docutils literal notranslate"><span class="pre">data_keys</span></code> attribute
on the currently loaded data.  This method populates the
<code class="xref py py-obj docutils literal notranslate"><span class="pre">data_id</span></code> attribute.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sofia_redux.pipeline.reduction.Reduction.load_fits_files">
<span class="sig-name descname"><span class="pre">load_fits_files</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sofia_redux/pipeline/reduction.html#Reduction.load_fits_files"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sofia_redux.pipeline.reduction.Reduction.load_fits_files" title="Permalink to this definition">¶</a></dt>
<dd><p>Load input FITS files into memory.</p>
<p>Input data files are stored as <a class="reference external" href="https://docs.astropy.org/en/stable/io/fits/api/hdulists.html#astropy.io.fits.HDUList" title="(in Astropy v5.3)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">astropy.io.fits.HDUList</span></code></a>
objects in the <a class="reference external" href="https://docs.python.org/3/library/functions.html#input" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">input</span></code></a> attribute.  Any input files that
cannot be read as FITS files will trigger a log warning,
but will otherwise be ignored.</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl>
<dt><strong>data</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">list</span></code></a> of str</span></dt><dd><p>Input FITS file paths.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sofia_redux.pipeline.reduction.Reduction.load_parameters">
<span class="sig-name descname"><span class="pre">load_parameters</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sofia_redux/pipeline/reduction.html#Reduction.load_parameters"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sofia_redux.pipeline.reduction.Reduction.load_parameters" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the parameter list for the current reduction recipe.</p>
<p>For each reduction step, this method calls
<code class="xref py py-obj docutils literal notranslate"><span class="pre">Parameters.add_current_parameters</span></code> to set default values,
then checks for a method corresponding to the step name
in the Parameters object.  If such a method is defined, it
is called.  This allows custom logic related to parameter
setting to be defined for each reduction step.</p>
<p>If the <code class="xref py py-obj docutils literal notranslate"><span class="pre">param_file</span></code> attribute is not null, loaded parameters
are overridden with any values defined in that file (via the
<code class="xref py py-obj docutils literal notranslate"><span class="pre">Parameters.from_config</span></code> method).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sofia_redux.pipeline.reduction.Reduction.log_input">
<span class="sig-name descname"><span class="pre">log_input</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sofia_redux/pipeline/reduction.html#Reduction.log_input"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sofia_redux.pipeline.reduction.Reduction.log_input" title="Permalink to this definition">¶</a></dt>
<dd><p>Log input data at INFO level.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sofia_redux.pipeline.reduction.Reduction.log_reduce">
<span class="sig-name descname"><span class="pre">log_reduce</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">end</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sofia_redux/pipeline/reduction.html#Reduction.log_reduce"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sofia_redux.pipeline.reduction.Reduction.log_reduce" title="Permalink to this definition">¶</a></dt>
<dd><p>Log the pipeline name and version.</p>
<p>This method is called at the beginning and end of the <a class="reference internal" href="#sofia_redux.pipeline.reduction.Reduction.reduce" title="sofia_redux.pipeline.reduction.Reduction.reduce"><code class="xref py py-obj docutils literal notranslate"><span class="pre">reduce</span></code></a>
function to describe the reduction that is about to run.  It
produces log messages at the INFO level.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>end</strong><span class="classifier">bool</span></dt><dd><p>If True, log a finishing message for the end of the reduction.
Otherwise, log the start up message.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sofia_redux.pipeline.reduction.Reduction.log_step">
<span class="sig-name descname"><span class="pre">log_step</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">step_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sofia_redux/pipeline/reduction.html#Reduction.log_step"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sofia_redux.pipeline.reduction.Reduction.log_step" title="Permalink to this definition">¶</a></dt>
<dd><p>Log the reduction step name, time, and parameters.</p>
<p>This method is called at the beginning of the <a class="reference internal" href="#sofia_redux.pipeline.reduction.Reduction.step" title="sofia_redux.pipeline.reduction.Reduction.step"><code class="xref py py-obj docutils literal notranslate"><span class="pre">step</span></code></a>
method.  Messages are logged at INFO level.  Hidden
parameters are not logged.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>step_name</strong><span class="classifier">str</span></dt><dd><p>Name of the reduction step.</p>
</dd>
<dt><strong>params</strong><span class="classifier">ParameterSet</span></dt><dd><p>Parameters for the reduction step.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sofia_redux.pipeline.reduction.Reduction.read_data_key">
<span class="sig-name descname"><span class="pre">read_data_key</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fname</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">header</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sofia_redux/pipeline/reduction.html#Reduction.read_data_key"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sofia_redux.pipeline.reduction.Reduction.read_data_key" title="Permalink to this definition">¶</a></dt>
<dd><p>Read a data keyword from a metadata header.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>key</strong><span class="classifier">str</span></dt><dd><p>Data keyword, not case sensitive.  ‘File Name’ and
‘File Size’ have special values; all other keywords are
retrieved from the <code class="xref py py-obj docutils literal notranslate"><span class="pre">header</span></code>.</p>
</dd>
<dt><strong>fname</strong><span class="classifier">str, optional</span></dt><dd><p>Name of the file being described.  Its basename is returned
if key is ‘File Name’.</p>
</dd>
<dt><strong>header</strong><span class="classifier">dict-like</span></dt><dd><p>Metadata header.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>str</dt><dd><p>A string representation of the metadata value.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sofia_redux.pipeline.reduction.Reduction.record_outfile">
<span class="sig-name descname"><span class="pre">record_outfile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">outfile</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sofia_redux/pipeline/reduction.html#Reduction.record_outfile"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sofia_redux.pipeline.reduction.Reduction.record_outfile" title="Permalink to this definition">¶</a></dt>
<dd><p>Store an output file name.</p>
<p>Output file names are recorded in the <code class="xref py py-obj docutils literal notranslate"><span class="pre">out_files</span></code>
attribute, which is used to generate output manifests.
The output file name is also logged at the INFO level.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>outfile</strong><span class="classifier">str</span></dt><dd><p>Path to the output file.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sofia_redux.pipeline.reduction.Reduction.reduce">
<span class="sig-name descname"><span class="pre">reduce</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sofia_redux/pipeline/reduction.html#Reduction.reduce"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sofia_redux.pipeline.reduction.Reduction.reduce" title="Permalink to this definition">¶</a></dt>
<dd><p>Reduce the current data.</p>
<p>All steps in the current reduction recipe is run.  This
function assumes that no steps have been run yet.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sofia_redux.pipeline.reduction.Reduction.register_viewers">
<span class="sig-name descname"><span class="pre">register_viewers</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sofia_redux/pipeline/reduction.html#Reduction.register_viewers"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sofia_redux.pipeline.reduction.Reduction.register_viewers" title="Permalink to this definition">¶</a></dt>
<dd><p>Instantiate viewers appropriate to the reduction.</p>
<p>This method instantiates and returns any <code class="xref py py-obj docutils literal notranslate"><span class="pre">Viewer</span></code> objects that may
be used to display data from this reduction.  Data for the viewers
is stored in the <code class="xref py py-obj docutils literal notranslate"><span class="pre">display_data</span></code> attribute, but no reference to
the viewers is stored in the reduction object itself.  Viewers
should be controlled through an <code class="xref py py-obj docutils literal notranslate"><span class="pre">Interface</span></code> object.</p>
<p>In this implementation, the default Viewer is returned,
which only prints a message at DEBUG level.  This method should
be overridden if more complex viewers are required.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt>list of Viewer</dt><dd><p>All viewers supported by this reduction object.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sofia_redux.pipeline.reduction.Reduction.set_parameter_set">
<span class="sig-name descname"><span class="pre">set_parameter_set</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">param</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">step_index</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sofia_redux/pipeline/reduction.html#Reduction.set_parameter_set"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sofia_redux.pipeline.reduction.Reduction.set_parameter_set" title="Permalink to this definition">¶</a></dt>
<dd><p>Set a parameter set for a reduction step.</p>
<p>This function is intended for restoring parameters
from a previously saved ParameterSet object.  Use
<a class="reference internal" href="#sofia_redux.pipeline.reduction.Reduction.edit_parameters" title="sofia_redux.pipeline.reduction.Reduction.edit_parameters"><code class="xref py py-obj docutils literal notranslate"><span class="pre">edit_parameters</span></code></a> for an interface that does not require
a ParameterSet object as input.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>param</strong><span class="classifier">ParameterSet</span></dt><dd><p>A full set of parameters for the reduction step.</p>
</dd>
<dt><strong>step_index</strong><span class="classifier">int, optional</span></dt><dd><p>The reduction step index in the current reduction
recipe.  If not provided, the current step_index
will be used.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sofia_redux.pipeline.reduction.Reduction.step">
<span class="sig-name descname"><span class="pre">step</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">alt_method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sofia_redux/pipeline/reduction.html#Reduction.step"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sofia_redux.pipeline.reduction.Reduction.step" title="Permalink to this definition">¶</a></dt>
<dd><p>Run a reduction step.</p>
<p>This method calls the reduction step specified in the
<code class="xref py py-obj docutils literal notranslate"><span class="pre">recipe</span></code> attribute, at the current <code class="xref py py-obj docutils literal notranslate"><span class="pre">step_index</span></code>.  If the
step index is out of range for the recipe, this method will
just return.</p>
<p>Normally, reduction steps are defined as methods in the
reduction object.  Sometimes, a reduction package may have its
own calling methods, rather than offering modular reduction
steps.  In this case, the <code class="xref py py-obj docutils literal notranslate"><span class="pre">alt_method</span></code> parameter should be used
to specify a reduction method that calls the external interface
for each pipeline step, marshalling and passing data to the
interface as required.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>alt_method</strong><span class="classifier">str, optional</span></dt><dd><p>If provided, this method will be run instead
of the method named by the reduction step name. This
is used in cases where the reduction step is not
implemented or described in the reduction object itself,
but in an external package.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>str</dt><dd><p>An error message if the reduction step produced any
errors; an empty string otherwise.</p>
</dd>
</dl>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt>RuntimeError</dt><dd><p>If there is no input to process, and self.check_input is True.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sofia_redux.pipeline.reduction.Reduction.update_parameters">
<span class="sig-name descname"><span class="pre">update_parameters</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sofia_redux/pipeline/reduction.html#Reduction.update_parameters"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sofia_redux.pipeline.reduction.Reduction.update_parameters" title="Permalink to this definition">¶</a></dt>
<dd><p>Update parameter values for the current reduction.</p>
<p>For each reduction step, this method checks for a method
corresponding to each step name in the Parameters object.
If such a method is defined, it is called.</p>
<p>If the <code class="xref py py-obj docutils literal notranslate"><span class="pre">param_file</span></code> attribute is not null, loaded parameters
are overridden with any values defined in that file (via the
<code class="xref py py-obj docutils literal notranslate"><span class="pre">Parameters.from_config</span></code> method).</p>
<p>Unlike the <a class="reference internal" href="#sofia_redux.pipeline.reduction.Reduction.load_parameters" title="sofia_redux.pipeline.reduction.Reduction.load_parameters"><code class="xref py py-obj docutils literal notranslate"><span class="pre">load_parameters</span></code></a> method, any previously edited parameters
not affected by either the step methods or the input file retain
their edited values.  If parameters have not yet been loaded, this
function has no effect.</p>
</dd></dl>

</dd></dl>

</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><h3>Page Contents</h3>
<ul>
<li><a class="reference internal" href="#">Reduction</a><ul>
<li><a class="reference internal" href="#sofia_redux.pipeline.reduction.Reduction"><code class="docutils literal notranslate"><span class="pre">Reduction</span></code></a><ul>
<li><a class="reference internal" href="#sofia_redux.pipeline.reduction.Reduction.description"><code class="docutils literal notranslate"><span class="pre">Reduction.description</span></code></a></li>
<li><a class="reference internal" href="#sofia_redux.pipeline.reduction.Reduction.cleanup"><code class="docutils literal notranslate"><span class="pre">Reduction.cleanup()</span></code></a></li>
<li><a class="reference internal" href="#sofia_redux.pipeline.reduction.Reduction.edit_parameters"><code class="docutils literal notranslate"><span class="pre">Reduction.edit_parameters()</span></code></a></li>
<li><a class="reference internal" href="#sofia_redux.pipeline.reduction.Reduction.get_key_value"><code class="docutils literal notranslate"><span class="pre">Reduction.get_key_value()</span></code></a></li>
<li><a class="reference internal" href="#sofia_redux.pipeline.reduction.Reduction.get_parameter_set"><code class="docutils literal notranslate"><span class="pre">Reduction.get_parameter_set()</span></code></a></li>
<li><a class="reference internal" href="#sofia_redux.pipeline.reduction.Reduction.load"><code class="docutils literal notranslate"><span class="pre">Reduction.load()</span></code></a></li>
<li><a class="reference internal" href="#sofia_redux.pipeline.reduction.Reduction.load_data_id"><code class="docutils literal notranslate"><span class="pre">Reduction.load_data_id()</span></code></a></li>
<li><a class="reference internal" href="#sofia_redux.pipeline.reduction.Reduction.load_fits_files"><code class="docutils literal notranslate"><span class="pre">Reduction.load_fits_files()</span></code></a></li>
<li><a class="reference internal" href="#sofia_redux.pipeline.reduction.Reduction.load_parameters"><code class="docutils literal notranslate"><span class="pre">Reduction.load_parameters()</span></code></a></li>
<li><a class="reference internal" href="#sofia_redux.pipeline.reduction.Reduction.log_input"><code class="docutils literal notranslate"><span class="pre">Reduction.log_input()</span></code></a></li>
<li><a class="reference internal" href="#sofia_redux.pipeline.reduction.Reduction.log_reduce"><code class="docutils literal notranslate"><span class="pre">Reduction.log_reduce()</span></code></a></li>
<li><a class="reference internal" href="#sofia_redux.pipeline.reduction.Reduction.log_step"><code class="docutils literal notranslate"><span class="pre">Reduction.log_step()</span></code></a></li>
<li><a class="reference internal" href="#sofia_redux.pipeline.reduction.Reduction.read_data_key"><code class="docutils literal notranslate"><span class="pre">Reduction.read_data_key()</span></code></a></li>
<li><a class="reference internal" href="#sofia_redux.pipeline.reduction.Reduction.record_outfile"><code class="docutils literal notranslate"><span class="pre">Reduction.record_outfile()</span></code></a></li>
<li><a class="reference internal" href="#sofia_redux.pipeline.reduction.Reduction.reduce"><code class="docutils literal notranslate"><span class="pre">Reduction.reduce()</span></code></a></li>
<li><a class="reference internal" href="#sofia_redux.pipeline.reduction.Reduction.register_viewers"><code class="docutils literal notranslate"><span class="pre">Reduction.register_viewers()</span></code></a></li>
<li><a class="reference internal" href="#sofia_redux.pipeline.reduction.Reduction.set_parameter_set"><code class="docutils literal notranslate"><span class="pre">Reduction.set_parameter_set()</span></code></a></li>
<li><a class="reference internal" href="#sofia_redux.pipeline.reduction.Reduction.step"><code class="docutils literal notranslate"><span class="pre">Reduction.step()</span></code></a></li>
<li><a class="reference internal" href="#sofia_redux.pipeline.reduction.Reduction.update_parameters"><code class="docutils literal notranslate"><span class="pre">Reduction.update_parameters()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>


        </div>
      </div>
      <div class="clearer"></div>
    </div>
<footer class="footer">
  <p class="pull-right">
    <a href="../_sources/api/sofia_redux.pipeline.reduction.Reduction.rst.txt"
       rel="nofollow">Page Source</a> &nbsp;
    <a href="#">Back to Top</a></p>
  <p>
    &copy; Copyright 2023, SOFIA-USRA.<br/>
    Created using <a href="http://www.sphinx-doc.org/en/stable/">Sphinx</a> 7.1.2. &nbsp;
    Last built 13 Aug 2023. <br/>
  </p>
</footer>
  </body>
</html>