<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Installation &#8212; sofia_redux v1.3.4.dev0</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="_static/bootstrap-sofia.css?v=3fe2c07e" />
    <link rel="stylesheet" type="text/css" href="_static/graphviz.css?v=eafc0fe6" />
    <link rel="stylesheet" type="text/css" href="_static/plot_directive.css" />
    
    <script src="_static/jquery.js?v=5d32c60e"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js?v=602f4d50"></script>
    <script src="_static/doctools.js?v=888ff710"></script>
    <script src="_static/sphinx_highlight.js?v=4825356b"></script>
    <script type="text/javascript" src="_static/sidebar.js"></script>
    <script type="text/javascript" src="_static/copybutton.js"></script>
    <link rel="icon" href="_static/redux.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,600' rel='stylesheet' type='text/css'/>

  </head><body>
<div class="topbar">
  <a class="brand" title="Documentation Home" href="index.html"><span id="logotext1">SOFIA</span><span id="logotext2">Redux</span><span id="logotext3">:docs</span></a>
  <ul>
    <li><a class="homelink" title="SOFIA Homepage" href="https://www.sofia.usra.edu/"></a></li>
    <li><a title="General Index" href="genindex.html">Index</a></li>
    <li><a title="Module Index" href="py-modindex.html">Modules</a></li>
    <li>
      
      
<form action="search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
      
    </li>
  </ul>
</div>

<div class="related">
    <h3>Navigation</h3>
    <ul>
      <li>
	<a href="index.html">sofia_redux v1.3.4.dev0</a>
	 &#187;
      </li>
      
       
    </ul>
</div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="installation">
<h1>Installation<a class="headerlink" href="#installation" title="Permalink to this heading">¶</a></h1>
<section id="stable-release">
<h2>Stable release<a class="headerlink" href="#stable-release" title="Permalink to this heading">¶</a></h2>
<p>The <code class="xref py py-obj docutils literal notranslate"><span class="pre">sofia_redux</span></code> package is available via anaconda or pip:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>conda install -c sofia-usra -c conda-forge sofia_redux
</pre></div>
</div>
<p>or:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>pip install sofia_redux
</pre></div>
</div>
</section>
<section id="from-source">
<h2>From source<a class="headerlink" href="#from-source" title="Permalink to this heading">¶</a></h2>
<p>Obtain the source code for this package from the <a class="reference external" href="https://github.com/SOFIA-USRA/sofia_redux">SOFIA Redux GitHub project</a>, then install via one of the
two methods below.</p>
<section id="via-anaconda">
<h3>Via Anaconda<a class="headerlink" href="#via-anaconda" title="Permalink to this heading">¶</a></h3>
<p>We recommend Anaconda for managing your Python environment.  A conda
environment specification is included with this package, as
<a class="reference external" href="https://raw.githubusercontent.com/SOFIA-USRA/sofia_redux/main/environment.yml">environment.yml</a>.</p>
<p>To install a <code class="docutils literal notranslate"><span class="pre">sofia_redux</span></code> environment with Anaconda from the package directory:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>conda env create -f environment.yml
</pre></div>
</div>
<p>Activate the environment:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>conda activate sofia_redux
</pre></div>
</div>
<p>Install an editable copy of the <code class="xref py py-obj docutils literal notranslate"><span class="pre">sofia_redux</span></code> package:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>pip install -e .
</pre></div>
</div>
<p>Deactivate the environment when done:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>conda deactivate
</pre></div>
</div>
<p>Remove the environment if necessary:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>conda remove --name sofia_redux --all
</pre></div>
</div>
</section>
<section id="via-pip">
<h3>Via Pip<a class="headerlink" href="#via-pip" title="Permalink to this heading">¶</a></h3>
<p>Alternately, prerequisites for the package can be installed with:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>pip install -r requirements.txt
</pre></div>
</div>
<p>and the package can then be installed as usual:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>pip install -e .
</pre></div>
</div>
</section>
</section>
<section id="optional-requirements">
<h2>Optional Requirements<a class="headerlink" href="#optional-requirements" title="Permalink to this heading">¶</a></h2>
<section id="pyqt5">
<h3>PyQt5<a class="headerlink" href="#pyqt5" title="Permalink to this heading">¶</a></h3>
<p>If sofia_redux is installed via pip, the PyQt5 package, required for
the pipeline GUI interface, is not automatically installed as a dependency.
To use the GUI tools, install PyQt5 via pip:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>pip install PyQt5
</pre></div>
</div>
<p>or conda:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>conda install pyqt
</pre></div>
</div>
<p>Please note that there may be some incompatibilities between some versions
of PyQt5, some versions of the package dependencies, and some host OS versions.
If you run into difficulty, we recommend using the Anaconda installation
method.</p>
</section>
<section id="ds9">
<h3>DS9<a class="headerlink" href="#ds9" title="Permalink to this heading">¶</a></h3>
<p>Some optional visualization tools in the SOFIA Redux interface also
use the <code class="xref py py-obj docutils literal notranslate"><span class="pre">pyds9</span></code> and <code class="xref py py-obj docutils literal notranslate"><span class="pre">regions</span></code> packages to interface with the external
SAOImage DS9 tool. To use these tools, install
<a class="reference external" href="https://sites.google.com/cfa.harvard.edu/saoimageds9">DS9</a>, then
install pyds9 and regions directly via pip:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>pip install pyds9 regions
</pre></div>
</div>
<p>or using the provided optional requirements file:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>pip install -r optional_requirements.txt
</pre></div>
</div>
<p>Please note that pyds9 requires gcc to compile, and is not available
on the Windows platform.  On MacOS, you will need to make a <code class="xref py py-obj docutils literal notranslate"><span class="pre">ds9</span></code>
executable available in your PATH environment variable; see the
<a class="reference external" href="http://ds9.si.edu/doc/faq.html#MacOSX">DS9 FAQs</a> for more information.</p>
</section>
<section id="reference-data">
<h3>Reference data<a class="headerlink" href="#reference-data" title="Permalink to this heading">¶</a></h3>
<p>Some pipeline modes require additional reference data for optimal data
quality.  These files are too large to distribute with the pipeline code,
so they are provided separately.</p>
<section id="atmospheric-models">
<h4>Atmospheric models<a class="headerlink" href="#atmospheric-models" title="Permalink to this heading">¶</a></h4>
<p>For optimal telluric correction, FORCAST, FLITECAM, and FIFI-LS spectroscopic
reductions require a library of FITS files, containing model atmospheric
transmission spectra, derived from the
<a class="reference external" href="https://atran.arc.nasa.gov/cgi-bin/atran/atran.cgi">ATRAN model</a>.</p>
<p>Two versions of the model libraries are available for each instrument, except
FLITECAM.  ATRAN files parameterized by water vapor are not available for
FLITECAM.</p>
<p>The EXES pipeline does not use ATRAN models for telluric correction, but it
does attach a reference atmospheric model at a matching altitude and zenith
angle to output spectral products, if available. The models used are derived
from the <a class="reference external" href="https://psg.gsfc.nasa.gov/">Planetary Spectrum Generator (PSG)</a>.</p>
<ul class="simple">
<li><p>FORCAST:</p>
<ul>
<li><p>Approximate models, not accounting for water vapor variation</p>
<ul>
<li><p>Download: <a class="reference external" href="https://irsa.ipac.caltech.edu/data/SOFIA/ATRAN_FITS/atran_forcast_standard.tgz">atran_forcast_standard.tgz</a></p></li>
<li><p>Size: 531.3 MB</p></li>
<li><p>MD5 checksum: 61141843b245eea1fdfd45167a1a750b</p></li>
</ul>
</li>
<li><p>More accurate models, enabling programmatic optimization of
the telluric correction</p>
<ul>
<li><p>Download: <a class="reference external" href="https://irsa.ipac.caltech.edu/data/SOFIA/ATRAN_FITS/atran_forcast_wv.tgz">atran_forcast_wv.tgz</a></p></li>
<li><p>Size: 37.5 GB</p></li>
<li><p>MD5 checksum: 49264dfd6c3288af2553f73f8082ec97</p></li>
</ul>
</li>
</ul>
</li>
<li><p>FIFI-LS:</p>
<ul>
<li><p>Approximate models, not accounting for water vapor variation</p>
<ul>
<li><p>Download: <a class="reference external" href="https://irsa.ipac.caltech.edu/data/SOFIA/ATRAN_FITS/atran_fifi-ls_standard.tgz">atran_fifi-ls_standard.tgz</a></p></li>
<li><p>Size: 143.9 MB</p></li>
<li><p>MD5 checksum: 9a6480d5967f4287388a3070e71e40e8</p></li>
</ul>
</li>
<li><p>More accurate models, enabling use of water vapor values
recorded in the FITS headers for more accurate telluric correction</p>
<ul>
<li><p>Download: <a class="reference external" href="https://irsa.ipac.caltech.edu/data/SOFIA/ATRAN_FITS/atran_fifi-ls_wv.tgz">atran_fifi-ls_wv.tgz</a></p></li>
<li><p>Size: 2.8 GB</p></li>
<li><p>MD5 checksum: 486a34fd229b13d8e45768f3664fff64</p></li>
</ul>
</li>
</ul>
</li>
<li><p>FLITECAM:</p>
<ul>
<li><p>Approximate models, not accounting for water vapor variation</p>
<ul>
<li><p>Download: <a class="reference external" href="https://irsa.ipac.caltech.edu/data/SOFIA/ATRAN_FITS/atran_flitecam_standard.tgz">atran_flitecam_standard.tgz</a></p></li>
<li><p>Size: 875 MB</p></li>
<li><p>MD5 checksum: 6576883144bcc381eacdfe16688ad4d2</p></li>
</ul>
</li>
</ul>
</li>
<li><p>EXES:</p>
<ul>
<li><p>Approximate models, not accounting for water vapor variation</p>
<ul>
<li><p>Download: <a class="reference external" href="https://irsa.ipac.caltech.edu/data/SOFIA/ATRAN_FITS/psg_exes_standard.tgz">psg_exes_standard.tgz</a></p></li>
<li><p>Size: 5.4 GB</p></li>
<li><p>MD5 checksum: 147cf56cf15f2626b75a600e1ede5410</p></li>
</ul>
</li>
</ul>
</li>
</ul>
<p>After downloading and unpacking the library, its location can be provided
to the pipeline as an optional parameter in the <em>Calibrate Flux</em> step for
FORCAST or FLITECAM, the <em>Telluric Correct</em> step for FIFI-LS, or the
<em>Extract Spectra</em> step for EXES.</p>
</section>
<section id="standard-flux-models">
<h4>Standard flux models<a class="headerlink" href="#standard-flux-models" title="Permalink to this heading">¶</a></h4>
<p>In addition to the ATRAN models, a library of standard flux models is
required to reduce FORCAST or FLITECAM standard spectra to instrumental
response curves. This should be rarely needed for standard scientific reductions,
since reference response curves are provided for most data.  If needed for
re-deriving spectral flux calibrations, the standard model spectra are
provided in the
<a class="reference external" href="https://github.com/SOFIA-USRA/sofia_redux">source distribution</a> of
this package, at sofia_redux/instruments/forcast/data/grism/standard_models
or sofia_redux/instruments/flitecam/data/grism/standard_models.</p>
</section>
<section id="flitecam-and-exes-auxiliary-data">
<h4>FLITECAM and EXES auxiliary data<a class="headerlink" href="#flitecam-and-exes-auxiliary-data" title="Permalink to this heading">¶</a></h4>
<p>The default auxiliary calibration and reference data for FLITECAM and
EXES reductions are too large to be included in the software packages
provided via PyPI or Anaconda.</p>
<p>These files are provided in full in the
<a class="reference external" href="https://github.com/SOFIA-USRA/sofia_redux">source distribution</a> of
this package.  Since they are required for most data reductions for these
instruments, they may also be automatically downloaded as needed for
non-source installations (i.e. via pip or conda).  Downloaded calibration
files are cached for later use in a ‘.sofia_redux’ directory in the user’s
home directory. For offline pipeline reductions, the source installation
is recommended.</p>
<p>For FLITECAM, the data provided in this manner includes nonlinearity
correction coefficients, spectroscopic order masks, and wavelength
calibration files.  For EXES, the large data files are bad pixel masks,
reset dark files, and nonlinearity correction coefficients.</p>
</section>
</section>
</section>
<section id="troubleshooting">
<h2>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permalink to this heading">¶</a></h2>
<p>Please note that direct support for this project will end in September 2023.</p>
<p>Prior to this time, please submit a ticket on the GitHub issues page for
installation assistance.</p>
<p>After this time, the source distribution of this package will remain available,
but it will not be maintained for the latest versions of all dependencies. It
is recommended that users fork their own copies of this package for continued
maintenance and development.</p>
<p>The last working set of installed versions of all dependencies is recorded in the
<a class="reference external" href="https://raw.githubusercontent.com/SOFIA-USRA/sofia_redux/main/freeze_requirements.txt">freeze_requirements.txt</a>
file in this package. If errors are encountered in the other listed installation
methods, it may be useful to install the frozen versions directly. For example, to install
from source using conda to create a new Python environment from the sofia_redux package
directory:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>conda create --name sofia_redux python=3.10
pip install -r freeze_requirements.txt
pip install -e .
</pre></div>
</div>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><h3>Page Contents</h3>
<ul>
<li><a class="reference internal" href="#">Installation</a><ul>
<li><a class="reference internal" href="#stable-release">Stable release</a></li>
<li><a class="reference internal" href="#from-source">From source</a><ul>
<li><a class="reference internal" href="#via-anaconda">Via Anaconda</a></li>
<li><a class="reference internal" href="#via-pip">Via Pip</a></li>
</ul>
</li>
<li><a class="reference internal" href="#optional-requirements">Optional Requirements</a><ul>
<li><a class="reference internal" href="#pyqt5">PyQt5</a></li>
<li><a class="reference internal" href="#ds9">DS9</a></li>
<li><a class="reference internal" href="#reference-data">Reference data</a><ul>
<li><a class="reference internal" href="#atmospheric-models">Atmospheric models</a></li>
<li><a class="reference internal" href="#standard-flux-models">Standard flux models</a></li>
<li><a class="reference internal" href="#flitecam-and-exes-auxiliary-data">FLITECAM and EXES auxiliary data</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#troubleshooting">Troubleshooting</a></li>
</ul>
</li>
</ul>


        </div>
      </div>
      <div class="clearer"></div>
    </div>
<footer class="footer">
  <p class="pull-right">
    <a href="_sources/install.rst.txt"
       rel="nofollow">Page Source</a> &nbsp;
    <a href="#">Back to Top</a></p>
  <p>
    &copy; Copyright 2023, SOFIA-USRA.<br/>
    Created using <a href="http://www.sphinx-doc.org/en/stable/">Sphinx</a> 7.1.2. &nbsp;
    Last built 13 Aug 2023. <br/>
  </p>
</footer>
  </body>
</html>