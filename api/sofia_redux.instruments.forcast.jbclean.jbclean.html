<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>jbclean &#8212; sofia_redux v1.3.4.dev0</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sofia.css?v=3fe2c07e" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=eafc0fe6" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    
    <script src="../_static/jquery.js?v=5d32c60e"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js?v=602f4d50"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=4825356b"></script>
    <script type="text/javascript" src="../_static/sidebar.js"></script>
    <script type="text/javascript" src="../_static/copybutton.js"></script>
    <link rel="icon" href="../_static/redux.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="merge" href="sofia_redux.instruments.forcast.merge.merge.html" />
    <link rel="prev" title="jbmedian" href="sofia_redux.instruments.forcast.jbclean.jbmedian.html" />
    <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,600' rel='stylesheet' type='text/css'/>

  </head><body>
<div class="topbar">
  <a class="brand" title="Documentation Home" href="../index.html"><span id="logotext1">SOFIA</span><span id="logotext2">Redux</span><span id="logotext3">:docs</span></a>
  <ul>
    <li><a class="homelink" title="SOFIA Homepage" href="https://www.sofia.usra.edu/"></a></li>
    <li><a title="General Index" href="../genindex.html">Index</a></li>
    <li><a title="Module Index" href="../py-modindex.html">Modules</a></li>
    <li>
      
      
<form action="../search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
      
    </li>
  </ul>
</div>

<div class="related">
    <h3>Navigation</h3>
    <ul>
      <li class="right">
	<a href="sofia_redux.instruments.forcast.merge.merge.html" title="merge">
	  next &raquo;
	</a>
      </li>
      <li class="right">
	<a href="sofia_redux.instruments.forcast.jbclean.jbmedian.html" title="jbmedian">
	  &laquo; previous
	</a>
	 |
      </li>
      <li>
	<a href="../index.html">sofia_redux v1.3.4.dev0</a>
	 &#187;
      </li>
      <li><a href="../sofia_redux/index.html" >SOFIA Redux</a> &#187;</li>
      <li><a href="../manuals/forcast/developers/developers.html" accesskey="U">FORCAST Redux Developer’s Manual</a> &#187;</li>
      
      <li>jbclean</li> 
    </ul>
</div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="jbclean">
<h1>jbclean<a class="headerlink" href="#jbclean" title="Permalink to this heading">¶</a></h1>
<dl class="py function">
<dt class="sig sig-object py" id="sofia_redux.instruments.forcast.jbclean.jbclean">
<span class="sig-prename descclassname"><span class="pre">sofia_redux.instruments.forcast.jbclean.</span></span><span class="sig-name descname"><span class="pre">jbclean</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">header</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">variance</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bar_spacing</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">16</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">width</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">4</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'wrap'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sofia_redux/instruments/forcast/jbclean.html#jbclean"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sofia_redux.instruments.forcast.jbclean.jbclean" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes “jailbar” artifacts from images</p>
<p>Filter the input data with a 16x16 box and remove the filtered
image from the input image.  Then, the jail bar is most of the
features found in the subtracted image.  We use this image to
calculate the jail bar using median.  This function checks the
configuration file (dripconf.txt) for a preferred method.  If
JBCLEAN is set to fft, it does a Fourier transform of the image,
to mask the 16-pixel periodic jailbar pattern.  This median
method appears to work better than the fft method in most cases
and is recommended.  If JBCLEAN is set to n, no jailbar correction
is performed.  Note that if JBCLEAN=fft, this function is called
by sofia_redux.instruments.forcast.clean on raw frames;
if JBCLEAN=median, this function is called by
sofia_redux.instruments.forcast.stack, on the chop/nod subtracted frames.</p>
<p>Note: for now, it is assumed that the jailbar has no error, so the
variance, if passed, is not modified.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>data</strong><span class="classifier">numpy.ndarray</span></dt><dd><p>Input data array (nrow, ncol)</p>
</dd>
<dt><strong>header</strong><span class="classifier">astropy.io.fits.header.Header, optional</span></dt><dd><p>Input header; will be updated with HISTORY message</p>
</dd>
<dt><strong>variance</strong><span class="classifier">numpy.ndarray, optional</span></dt><dd><p>Variance array (nrow, ncol) to update in parallel with
the data array</p>
</dd>
<dt><strong>bar_spacing</strong><span class="classifier">int, optional</span></dt><dd><p>known jailbar spacing between columns</p>
</dd>
<dt><strong>width</strong><span class="classifier">int, optional</span></dt><dd><p>Only applies if JBCLEAN=median.  See <a class="reference internal" href="sofia_redux.instruments.forcast.jbclean.jbmedian.html#sofia_redux.instruments.forcast.jbclean.jbmedian" title="sofia_redux.instruments.forcast.jbclean.jbmedian"><code class="xref py py-obj docutils literal notranslate"><span class="pre">jbmedian</span></code></a> for details</p>
</dd>
<dt><strong>mode</strong><span class="classifier">str, optional</span></dt><dd><p>Specifies the edge handling mode for median filter. Only applies
if JBCLEAN=median.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>numpy.ndarray, numpy.ndarray</dt><dd><p>Jailbar-cleaned array (nimage, nrow, ncol) or (nrow, ncol)
Propagated variance (nimage, nrow, ncol) or (nrow, ncol)</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><h3>Page Contents</h3>
<ul>
<li><a class="reference internal" href="#">jbclean</a><ul>
<li><a class="reference internal" href="#sofia_redux.instruments.forcast.jbclean.jbclean"><code class="docutils literal notranslate"><span class="pre">jbclean()</span></code></a></li>
</ul>
</li>
</ul>


        </div>
      </div>
      <div class="clearer"></div>
    </div>
<footer class="footer">
  <p class="pull-right">
    <a href="../_sources/api/sofia_redux.instruments.forcast.jbclean.jbclean.rst.txt"
       rel="nofollow">Page Source</a> &nbsp;
    <a href="#">Back to Top</a></p>
  <p>
    &copy; Copyright 2023, SOFIA-USRA.<br/>
    Created using <a href="http://www.sphinx-doc.org/en/stable/">Sphinx</a> 7.1.2. &nbsp;
    Last built 13 Aug 2023. <br/>
  </p>
</footer>
  </body>
</html>